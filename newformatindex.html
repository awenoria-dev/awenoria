/* ----- dropdown desktop ----- */
document.querySelectorAll('.dropdown').forEach(dd=>{
  const btn=dd.querySelector('.dropdown-toggle');
  const panel=dd.querySelector('.mega');
  const open=()=>{
    document.querySelectorAll('.mega').forEach(p=>p.classList.remove('open'));
    panel.classList.add('open');
    btn.setAttribute('aria-expanded','true');
  };
  const close=()=>{
    panel.classList.remove('open');
    btn.setAttribute('aria-expanded','false');
  };
  btn.addEventListener('click',e=>{e.stopPropagation();panel.classList.contains('open')?close():open()});
  dd.addEventListener('mouseenter',open);
  dd.addEventListener('mouseleave',close);
});
document.addEventListener('click',()=>document.querySelectorAll('.mega').forEach(p=>p.classList.remove('open')));

/* ----- mobile menu ----- */
const btn=document.getElementById('mobile-menu');
const nav=document.getElementById('mobile-nav');
const svg=document.getElementById('hamburger-icon');
let open=false;
btn.addEventListener('click',()=>{
  open=!open;
  nav.classList.toggle('hidden');
  svg.setAttribute('d',open?'M6 18L18 6M6 6l12 12':'M4 6h16M4 12h16M4 18h16');
});
nav.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>nav.classList.add('hidden')));

/* ----- smooth scroll ----- */
document.querySelectorAll('a[href^="#"]').forEach(a=>a.addEventListener('click',e=>{
  e.preventDefault();
  const t=document.querySelector(a.getAttribute('href'));
  if(t)t.scrollIntoView({behavior:'smooth',block:'start'});
}));
