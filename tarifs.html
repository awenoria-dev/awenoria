<!DOCTYPE html>
<html lang="fr" class="theme-light">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Awenoria — Tarifs & formules</title>
<meta name="description" content="Le luxe de l’audit à prix démocratisé. Offres claires, remises en paiement en une fois, expérience premium et fluide.">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16.png">
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
/* ==========================================================
   Awenoria — Tarifs (Apple‑inspired visual polish)
   - Clean system font stack (SF Pro first if available)
   - Subtle glass effects, gradient borders, generous spacing
   - Smooth motion with prefers-reduced-motion support
   - Light/Dark via media query tokens
   ========================================================== */

:root{
  /* Core palette (light) */
  --ink: #1d1d1f; --muted:#6e6e73;
  --bg: #ffffff; --bg-alt:#f5f5f7; --scrim:#fafafc;
  --surface:#fff; --stroke:#e5e5ea; --stroke-strong:#d2d2d7;
  --blue:#0071e3; --blue-ink:#0a84ff; /* Apple blue vibes */
  --accent:#ff7a1a; --accent-2:#ffb067; /* keep copper signature */
  --radius:28px; --radius-lg:34px; --radius-xl:40px;
  --shadow-sm:0 8px 24px rgba(0,0,0,.06);
  --shadow-md:0 20px 40px rgba(0,0,0,.08);
  --shadow-lg:0 40px 80px rgba(0,0,0,.12);
  --focus:#0071e3;
  --hero-overlay: linear-gradient(180deg, rgba(6, 49, 94, .34), rgba(6,49,94,.42));

  --container: 1280px;
}

@media (prefers-color-scheme: dark){
  :root{
    --ink:#f5f5f7; --muted:#a1a1a6;
    --bg:#000; --bg-alt:#101010; --scrim:#161617;
    --surface:#0b0b0c; --stroke:#2c2c2e; --stroke-strong:#3a3a3c;
    --blue:#0a84ff; --blue-ink:#63a8ff;
    --shadow-sm:0 8px 24px rgba(0,0,0,.45);
    --shadow-md:0 20px 40px rgba(0,0,0,.55);
    --shadow-lg:0 50px 110px rgba(0,0,0,.65);
    --hero-overlay: linear-gradient(180deg, rgba(40,40,42,.42), rgba(18,18,20,.58));
  }
}

/* Base */
*{box-sizing:border-box}
html,body{margin:0}
body{
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  font-family: "SF Pro Text", "SF Pro Icons", Manrope, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--ink); background:var(--bg);
  line-height:1.55; font-size:17px; letter-spacing:-.022em;
}
:focus-visible{outline:3px solid var(--focus); outline-offset:3px; border-radius:10px}

.container{max-width:var(--container); margin:0 auto; padding:24px 22px}

/* ===== Header — minimal, airy, sticky ===== */
.header{position:sticky;top:0;z-index:60; backdrop-filter:saturate(180%) blur(14px);
  background:color-mix(in oklab, var(--scrim) 64%, transparent);
  border-bottom:1px solid color-mix(in oklab, var(--stroke) 80%, transparent);
  transition: background .25s ease, border-color .25s ease, box-shadow .25s ease;
}
.header.scrolled{box-shadow:0 8px 30px rgba(0,0,0,.06);}
.nav{display:flex;align-items:center;gap:18px;min-height:72px}
.brand__logo{height:64px;width:auto}
@media(min-width:992px){.brand__logo{height:72px}}

.mainnav{display:flex;gap:6px;margin-left:auto}
.menu-item{list-style:none;position:relative}
.menu-link{
  display:inline-flex;align-items:center;gap:6px;padding:10px 12px;border-radius:12px;
  font-weight:700;color:var(--ink);opacity:.9; text-decoration:none;
}
.menu-link:hover{opacity:1; background:color-mix(in oklab, var(--stroke) 14%, transparent)}
.menu-link.active{color:var(--blue)}
.dropdown{position:absolute;top:calc(100% + 10px);left:0;min-width:280px;padding:10px;background:var(--surface);
  border:1px solid var(--stroke);border-radius:16px;box-shadow:var(--shadow-md);opacity:0;visibility:hidden;transform:translateY(8px);transition:.18s}
.menu-item:hover .dropdown{opacity:1;visibility:visible;transform:translateY(0)}
.dropdown a{display:flex;padding:10px 12px;border-radius:10px;color:var(--ink);font-weight:700;text-decoration:none}
.dropdown a:hover{background:color-mix(in oklab, var(--stroke) 18%, transparent)}

/* ===== Hero — soft spotlight + gradient glass ===== */
.hero--image{position:relative; text-align:center; color:#fff; overflow:hidden; min-height:46vh; display:grid; place-items:center;
  background:
    radial-gradient(1200px 520px at 10% -10%, rgba(255,255,255,.16), rgba(255,255,255,0) 60%),
    radial-gradient(1000px 600px at 120% 10%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%),
    var(--hero-overlay),
    linear-gradient(180deg, #9ac3e6 0%, #7fb0d9 40%, #5e9ad0 100%);
}
.hero--image::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:radial-gradient(1200px 600px at 50% -10%, rgba(255,255,255,.22), transparent 60%);
  mix-blend-mode:screen; filter:blur(10px); opacity:.7;
}
.hero--image .inner{position:relative; z-index:1; padding:72px 20px 40px}
.hero--image h1{margin:0 0 8px;font-size: clamp(40px, 6vw, 62px);line-height:1.06;color:#fff;letter-spacing:-.02em;font-weight:800}
.hero--image p{margin:8px auto 0; max-width:760px; color:rgba(255,255,255,.9)}

/* ===== Section ===== */
.section{padding:30px 0 36px}
.section-title{margin:10px 0 6px;font-size: clamp(28px, 3.4vw, 40px);color:var(--ink);text-align:center;letter-spacing:-.015em}
.section-sub{margin:6px auto 0; max-width:820px; color:var(--muted); text-align:center}

/* ===== Scene / Carousel ===== */
.scene{position:relative; height:86vh; min-height:720px; max-height:980px; margin:18px auto 0; border-radius:var(--radius-lg);
  background:linear-gradient(180deg,var(--bg-alt), var(--scrim)); border:1px solid var(--stroke); box-shadow:var(--shadow-sm);
  overflow:visible; padding-bottom:64px}
.scene::before{content:""; position:absolute; left:50%; top:50%; width:min(1600px,108vw); height:min(1600px,108vw);
  transform:translate(-50%,-50%); background:radial-gradient(ellipse at center, rgba(255,255,255,.92) 0%, rgba(255,255,255,0) 62%);
  filter:blur(52px); pointer-events:none; z-index:0}

.viewport{position:absolute; inset:0; display:grid; align-items:center; overflow:visible}
.track{position:relative; display:flex; gap:48px; align-items:stretch; padding:46px 14vw 122px; overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; z-index:1; overflow-y:visible}
.track::-webkit-scrollbar{display:none}

/* Edges hover auto-scroll */
.edge{position:absolute; top:0; bottom:0; width:10vw; z-index:3}
.edge.left{left:0} .edge.right{right:0}
.edge:after{content:""; position:absolute; inset:0; background:linear-gradient(90deg,rgba(255,255,255,.0),rgba(255,255,255,.7)); opacity:0; transition:.2s}
.edge.left:after{transform:scaleX(-1)}
.edge:hover:after{opacity:.35}

/* ===== Pricing Cards (glass + gradient border) ===== */
.card{scroll-snap-align:center; position:relative; flex:0 0 min(640px,92vw); border-radius:var(--radius);
  background:linear-gradient(180deg, color-mix(in oklab, var(--surface) 92%, transparent), color-mix(in oklab, var(--surface) 86%, transparent));
  border:1px solid var(--stroke); box-shadow:var(--shadow-sm); padding:36px 36px 26px; transition:.38s transform, .38s filter, .38s box-shadow, .38s opacity, .38s border-color; transform-origin:center center;
  filter:saturate(.88) brightness(.98) blur(.2px); opacity:.56; overflow:visible; isolation:isolate;
}
.card::before{ /* subtle gradient ring */
  content:""; position:absolute; inset:-1px; border-radius:inherit; padding:1px; background:
  linear-gradient(180deg, color-mix(in oklab, var(--stroke-strong) 55%, transparent), color-mix(in oklab, var(--stroke) 45%, transparent)); -webkit-mask:
  linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude;
}
.card.center{transform:perspective(1400px) translateZ(0) scale(1.18); filter:none; opacity:1; box-shadow:var(--shadow-lg); border-color:color-mix(in oklab, var(--stroke) 55%, transparent)}
.card.left{transform:perspective(1400px) rotateY(5.5deg) scale(.92)}
.card.right{transform:perspective(1400px) rotateY(-5.5deg) scale(.92)}
.card.center::after{content:""; position:absolute; inset:0; border-radius:inherit; background:linear-gradient(180deg, rgba(255,255,255,.5), rgba(255,255,255,0) 46%); pointer-events:none}

/* Ribbons & badges */
.ribbon{position:absolute; top:-12px; left:18px; z-index:5; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; font-weight:900; font-size:12px; letter-spacing:.2px; border-radius:999px; padding:9px 14px; box-shadow:var(--shadow-sm)}
.popular{position:absolute; top:-12px; right:18px; z-index:5; background:var(--ink); color:#fff; font-weight:900; font-size:12px; border-radius:999px; padding:9px 14px; box-shadow:var(--shadow-sm)}
.discount{position:absolute; top:18px; right:18px; z-index:6; display:grid; place-items:center; min-width:58px; height:58px; padding:0 10px; border-radius:999px; background:linear-gradient(180deg, #ff8a80, #ff3b30); color:#fff; font-weight:900; border:none; cursor:pointer; box-shadow:0 10px 26px rgba(255,59,48,.35); transition:transform .18s ease, box-shadow .18s ease}
.discount:hover{transform:scale(1.06)}
.discount::after{content:"En savoir plus"; position:absolute; bottom:-28px; white-space:nowrap; background:var(--surface); color:var(--ink); border:1px solid var(--stroke); border-radius:999px; font-size:11px; padding:4px 8px; box-shadow:var(--shadow-sm); opacity:0; transform:translateY(6px); transition:.18s ease}
.discount:hover::after{opacity:1; transform:none}

/* Content */
.subtitle{margin:2px auto 6px;text-align:center;color:var(--muted);font-weight:800;font-size:12px;letter-spacing:.12em;text-transform:uppercase}
.h3{margin:8px 0 8px;text-align:center;color:var(--ink);letter-spacing:-.01em;font-weight:900;font-size:clamp(20px, 2.4vw, 24px)}
.price-row{display:flex;align-items:baseline;justify-content:center;gap:8px;margin:2px 0 10px}
.price{font-size:clamp(40px, 4.8vw, 58px);font-weight:900;letter-spacing:-.01em}
.per{font-size:14px;color:var(--muted)}
.promise{margin:8px auto 4px;text-align:center;color:var(--ink);font-weight:700}

.features{margin:18px 0 0;padding:0 2px;list-style:none}
.features li{display:flex;gap:12px;align-items:flex-start;margin:12px 0}
.icon{flex:0 0 22px;height:22px;border-radius:999px;border:2px solid color-mix(in oklab, var(--blue) 35%, var(--stroke));display:grid;place-items:center}
.icon:before{content:"";display:block;width:8px;height:14px;border-right:3px solid var(--blue);border-bottom:3px solid var(--blue);transform:rotate(45deg) translate(-1px,-2px)}

/* CTA */
.cta{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:16px}
.btn{appearance:none;border:none;cursor:pointer;font-weight:800;font-size:16px;padding:14px 18px;border-radius:12px;color:#fff;background:linear-gradient(180deg,var(--blue), color-mix(in oklab, var(--blue) 82%, #003a77 18%)); box-shadow:0 10px 30px rgba(0,113,227,.24), inset 0 1px 0 rgba(255,255,255,.28); transition:.18s}
.btn:hover{filter:brightness(1.05)}
.btn:active{transform:translateY(1px)}
.btn.ghost{background:transparent;color:var(--ink);border:1px solid var(--stroke);box-shadow:none}
.btn[disabled]{opacity:.55;cursor:not-allowed}
.note{margin-top:10px;color:var(--muted);font-size:13px;text-align:center}

/* Savebar */
.savebar{margin-top:12px; display:flex; justify-content:center; gap:8px; align-items:center; background:color-mix(in oklab, #fff6ee 70%, var(--surface)); border:1px solid #ffdfc7; color:#8a4200; font-weight:800; font-size:12px; padding:8px 12px; border-radius:12px; opacity:.0; transform:translateY(6px); transition:.22s}
.card.center .savebar{opacity:1; transform:none}

/* Details */
.details{margin-top:12px;border:1px dashed var(--stroke);border-radius:16px;background:color-mix(in oklab, #fbfeff 85%, var(--surface));overflow:hidden;max-height:0;opacity:0;transition:max-height .3s ease, opacity .3s ease}
.card.show-details .details{max-height:240px;opacity:1}
.details-inner{padding:12px 14px;font-size:14px}
.details b{color:var(--ink)}

/* Arrows */
.arrow{position:absolute; top:50%; transform:translateY(-50%); z-index:4; width:58px;height:58px;border-radius:18px; background:linear-gradient(180deg,rgba(255,255,255,.9),rgba(255,255,255,.7)); border:1px solid rgba(210,225,238,.9); box-shadow:0 10px 20px rgba(20,40,70,.16), inset 0 1px 0 rgba(255,255,255,.9); backdrop-filter: blur(6px); display:grid;place-items:center;cursor:pointer;user-select:none}
.arrow svg{width:24px;height:24px}
.arrow:hover{transform:translateY(-50%) scale(1.04)}
.arrow.left{left:22px} .arrow.right{right:22px}
@media(max-width:820px){.arrow{display:none}}

/* Dots */
.dots{position:absolute; left:50%; bottom:16px; transform:translateX(-50%); display:flex; gap:10px; z-index:3}
.dot{width:8px;height:8px;border-radius:50%; background:color-mix(in oklab, var(--ink) 28%, transparent); opacity:.4; transition:.18s}
.dot.active{opacity:1; transform:scale(1.22); background:var(--ink)}

/* Footer */
.footer{border-top:1px solid var(--stroke);padding:26px 0;margin-top:44px;color:var(--muted);font-size:14px}
.footer a{color:var(--blue); text-decoration:none}
.footer a:hover{text-decoration:underline}

/* Motion reduce */
@media (prefers-reduced-motion: reduce){
  .card, .arrow, .discount, .edge:after{transition:none}
  .card{transform:none !important}
}
</style>
</head>
<body>
<header id="site-header" class="header">
  <div class="container nav">
    <a href="./index.html" class="brand" aria-label="Awenoria – Accueil"><img src="./images/logo.png" alt="Awenoria" class="brand__logo"></a>
    <ul class="mainnav" role="menubar" aria-label="Navigation principale">
      <li class="menu-item" role="none"><a class="menu-link" role="menuitem" href="index.html">Accueil</a></li>
      <li class="menu-item" role="none">
        <a class="menu-link active" role="menuitem" href="#" data-page="audit.html" aria-haspopup="true" aria-expanded="false">Audit ▾</a>
        <div class="dropdown" role="menu">
          <a href="./fonctionnalites.html" role="menuitem">• Fonctionnalités</a>
          <a href="./comment.html" role="menuitem">• Méthodologie</a>
          <a href="./tarifs.html" aria-current="page" role="menuitem"><b>• Tarifs</b></a>
        </div>
      </li>
      <li class="menu-item" role="none">
        <a class="menu-link" role="menuitem" href="#ressources" aria-haspopup="true" aria-expanded="false">Ressources ▾</a>
        <div class="dropdown" role="menu">
          <a href="guides.html" role="menuitem">• Guides & bonnes pratiques</a>
          <a href="modeles.html" role="menuitem">• Modèles juridiques</a>
          <a href="#externes" role="menuitem">• Articles externes</a>
          <a href="faq.html" role="menuitem">• FAQ</a>
        </div>
      </li>
      <li class="menu-item" role="none"><a class="menu-link" role="menuitem" href="a-propos.html">À propos</a></li>
      <li class="menu-item" role="none"><a class="menu-link" role="menuitem" href="contact.html">Contact</a></li>
    </ul>
  </div>
</header>

<section class="hero--image" role="banner" aria-label="Tarifs & formules">
  <div class="inner">
    <h1>Tarifs & formules</h1>
    <p>Une expérience premium, des prix limpides, et une remise élégante en paiement en une fois.</p>
  </div>
</section>

<section class="section" aria-label="Offres Awenoria">
  <div class="container">
    <h2 class="section-title">Nos offres</h2>
    <p class="section-sub">Choisissez la formule qui convient à votre maturité digitale. Changez, annulez ou passez en paiement en une fois quand vous voulez.</p>
  </div>

  <div class="scene" role="region" aria-label="Carrousel des offres">
    <!-- hover edges for auto-scroll -->
    <div class="edge left"  id="edgeLeft" aria-hidden="true"></div>
    <div class="edge right" id="edgeRight" aria-hidden="true"></div>

    <button class="arrow left" id="prev" aria-label="Précédent">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M15 5l-7 7 7 7" stroke="#0b4e80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>
    <button class="arrow right" id="next" aria-label="Suivant">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 5l7 7-7 7" stroke="#0b4e80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>

    <div class="viewport">
      <div class="track" id="track">
        <!-- Créateurs -->
        <article class="card" tabindex="0" data-plan="crea" data-monthly="1" data-annual="10" data-market="2">
          <span class="ribbon" data-ribbon></span>
          <button class="discount" data-jump title="Remise paiement en 1 fois"></button>

          <p class="subtitle">Essentiel</p>
          <h3 class="h3">Créateurs</h3>
          <div class="price-row"><span class="price">1 €</span><span class="per">/ mois</span></div>
          <p class="promise">Le point de départ propre et rassurant.</p>

          <ul class="features">
            <li><span class="icon" aria-hidden="true"></span>Scan démo + synthèse immédiate</li>
            <li><span class="icon" aria-hidden="true"></span>Modèles de mentions légales</li>
            <li><span class="icon" aria-hidden="true"></span>Conseils RGPD indispensables</li>
          </ul>

          <div class="cta">
            <button class="btn" disabled>Essai 3 jours → Mensuel</button>
            <button class="btn ghost" disabled>Annuel 10 €</button>
            <button class="btn ghost" data-toggle>Détails</button>
          </div>

          <div class="savebar" data-savebar></div>
          <div class="details"><div class="details-inner" data-details></div></div>
          <p class="note">Paiement à l’ouverture commerciale.</p>
        </article>

        <!-- Micro & Assos -->
        <article class="card" tabindex="0" data-plan="micro" data-monthly="2" data-annual="20" data-market="5">
          <span class="ribbon" data-ribbon></span>
          <button class="discount" data-jump title="Remise paiement en 1 fois"></button>

          <p class="subtitle">Le meilleur départ</p>
          <h3 class="h3">Micro & Assos</h3>
          <div class="price-row"><span class="price">2 €</span><span class="per">/ mois</span></div>
          <p class="promise">Tout ce qu’il faut, rien d’inutile.</p>

          <ul class="features">
            <li><span class="icon" aria-hidden="true"></span>Scan site + analyse PDF locale</li>
            <li><span class="icon" aria-hidden="true"></span>Rapport PDF “preuve d’audit”</li>
            <li><span class="icon" aria-hidden="true"></span>Templates RGPD/CGV prêts à remplir</li>
          </ul>

          <div class="cta">
            <button class="btn" disabled>Essai 3 jours → Mensuel</button>
            <button class="btn ghost" disabled>Annuel 20 €</button>
            <button class="btn ghost" data-toggle>Détails</button>
          </div>

          <div class="savebar" data-savebar></div>
          <div class="details"><div class="details-inner" data-details></div></div>
          <p class="note">Paiement à l’ouverture commerciale.</p>
        </article>

        <!-- Pros & Agences -->
        <article class="card" tabindex="0" data-plan="pros" data-monthly="9.9" data-annual="85" data-market="19">
          <span class="ribbon" data-ribbon></span>
          <span class="popular" aria-label="Populaire">Populaire</span>
          <button class="discount" data-jump title="Remise paiement en 1 fois"></button>

          <p class="subtitle">Gain de temps maximal</p>
          <h3 class="h3">Pros & Agences</h3>
          <div class="price-row"><span class="price">9,90 €</span><span class="per">/ mois</span></div>
          <p class="promise">Productivité, rigueur, livrables prêts client.</p>

          <ul class="features">
            <li><span class="icon" aria-hidden="true"></span>Audit multi-thèmes (RGPD / A11y / Mentions)</li>
            <li><span class="icon" aria-hidden="true"></span>Génération & suivi de documents</li>
            <li><span class="icon" aria-hidden="true"></span>Portail client, export complet</li>
          </ul>

          <div class="cta">
            <button class="btn" disabled>Essai 3 jours → Mensuel</button>
            <button class="btn ghost" disabled>Annuel 85 €</button>
            <button class="btn ghost" data-toggle>Détails</button>
          </div>

          <div class="savebar" data-savebar></div>
          <div class="details"><div class="details-inner" data-details></div></div>
          <p class="note">Paiement à l’ouverture commerciale.</p>
        </article>
      </div>

      <div class="dots" id="dots" aria-hidden="false"></div>
    </div>
  </div>
</section>

<footer class="container footer">
  <div style="display:flex;gap:12px;justify-content:space-between;flex-wrap:wrap">
    <span>© <span id="year"></span> Awenoria</span>
    <span><a href="mentions.html">Mentions légales</a> · <a href="confidentialite.html">Confidentialité</a></span>
  </div>
</footer>

<script>
/* Year + sticky header state */
document.getElementById('year').textContent = new Date().getFullYear();
(function(){const h=document.getElementById('site-header');const t=()=>{h.classList.toggle('scrolled',window.scrollY>10)};t();window.addEventListener('scroll',t,{passive:true})})();

/* Money utils */
const euro=n=>(Math.round(n*100)/100).toLocaleString('fr-FR',{minimumFractionDigits:(n%1?2:0),maximumFractionDigits:2})+' \u20AC';
const pct =n=>(Math.round(n*10)/10).toLocaleString('fr-FR')+' %';

/* Ribbons + details + badges + savebar */
document.querySelectorAll('.card[data-plan]').forEach(card=>{
  const name = card.querySelector('.h3')?.textContent.trim() || '';
  const m=parseFloat(card.dataset.monthly||'0');
  const a=parseFloat(card.dataset.annual||'0');
  const market=parseFloat(card.dataset.market||'0');
  const yearFull=m*12, rate=yearFull?((yearFull-a)/yearFull*100):0;

  const rb=card.querySelector('[data-ribbon]');
  if(rb) rb.textContent=`Paiement en 1 fois : −${pct(rate)} (${euro(a)}/an)`;

  const badge=card.querySelector('[data-jump]');
  if(badge) badge.textContent = `−${pct(rate)}`;

  const savebar=card.querySelector('[data-savebar]');
  if(savebar) savebar.textContent = `Paiement en 1 fois : −${pct(rate)} (${euro(a)}/an)`;

  const details=card.querySelector('[data-details]');
  if(details){
    const saveM=Math.max(0, market-m);
    const saveRate=market?saveM/market*100:0;
    const saveAn=Math.max(0, yearFull-a);
    details.innerHTML = `
      <b>${name}</b> — Prix marché estimé : <b>${euro(market)}/mois</b>.<br>
      Économie mensuelle : <b>${euro(saveM)}</b> (${pct(saveRate)}).<br>
      En paiement en une fois : <b>${euro(saveAn)}</b> gagnés / an (${pct(rate)} vs mensuel).
      <div class="note">Estimations indicatives — adaptez selon votre benchmark.</div>
    `;
  }

  badge?.addEventListener('click', ()=>{
    card.scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'});
    setTimeout(()=>card.classList.add('show-details'), 260);
  });

  card.querySelector('[data-toggle]')?.addEventListener('click',()=>card.classList.toggle('show-details'));
});

/* Carousel active center */
const track=document.getElementById('track');
const cards=[...track.querySelectorAll('.card')];
const dots=document.getElementById('dots');
const prev=document.getElementById('prev'), next=document.getElementById('next');

function idxCenter(){
  const mid=track.getBoundingClientRect().left + track.clientWidth/2;
  let k=0,dmin=1e9; cards.forEach((c,i)=>{const r=c.getBoundingClientRect(); const d=Math.abs((r.left+r.right)/2-mid); if(d<dmin){dmin=d;k=i;}});
  return k;
}
function setActive(i){
  cards.forEach((c,j)=>{
    c.classList.toggle('center', j===i);
    c.classList.toggle('left', j<i);
    c.classList.toggle('right', j>i);
    const dist=Math.abs(j-i);
    const blur=Math.min(.9, dist*.35);
    c.style.filter = c.classList.contains('center') ? 'none' : `saturate(.88) brightness(.98) blur(${blur}px)`;
    c.style.opacity = c.classList.contains('center') ? 1 : (dist>=2 ? 0.40 : 0.56);
  });
  [...dots.children].forEach((d,j)=>d.classList.toggle('active', j===i));
}
function buildDots(){
  dots.innerHTML='';
  cards.forEach((_,i)=>{
    const s=document.createElement('span'); s.className='dot'+(i===0?' active':''); s.tabIndex=0; s.role='button'; s.ariaLabel=`Accéder à la carte ${i+1}`;
    s.addEventListener('click',()=>goTo(i));
    s.addEventListener('keydown',e=>{ if(e.key==='Enter'||e.key===' '){e.preventDefault();goTo(i);} });
    dots.appendChild(s);
  });
}
buildDots(); setActive(0);

function goDelta(dir=1){ const w = cards[0].getBoundingClientRect().width + 48; track.scrollBy({ left: dir*w, behavior:'smooth' }); }
function goTo(i){ i=Math.max(0,Math.min(cards.length-1,i)); cards[i].scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'}); }
prev.addEventListener('click', ()=>goDelta(-1));
next.addEventListener('click', ()=>goDelta(+1));

cards.forEach((c,i)=>c.addEventListener('click', ()=>goTo(i)));

/* Drag desktop */
let dragging=false, startX=0, scrollX=0;
track.addEventListener('pointerdown', e=>{dragging=true; startX=e.clientX; scrollX=track.scrollLeft; track.setPointerCapture(e.pointerId);});
track.addEventListener('pointermove', e=>{ if(!dragging) return; track.scrollLeft = scrollX - (e.clientX-startX);});
track.addEventListener('pointerup', ()=>{dragging=false});

/* Wheel: horizontal with Shift or horizontal deltas */
track.addEventListener('wheel', e=>{
  const wantsHorizontal = e.shiftKey || Math.abs(e.deltaX) > Math.abs(e.deltaY);
  if(wantsHorizontal){ track.scrollLeft += (Math.abs(e.deltaX) > 0 ? e.deltaX : e.deltaY); e.preventDefault(); }
},{passive:false});

/* Hover auto-scroll edges */
const edgeL=document.getElementById('edgeLeft'), edgeR=document.getElementById('edgeRight');
let raf=null, dir=0;
function step(){ if(dir!==0){ track.scrollLeft += dir*12; raf=requestAnimationFrame(step); } }
function start(d){ dir=d; if(!raf) raf=requestAnimationFrame(step); }
function stop(){ dir=0; if(raf){cancelAnimationFrame(raf); raf=null;} }
edgeL.addEventListener('mouseenter', ()=>start(-1));
edgeR.addEventListener('mouseenter', ()=>start(+1));
edgeL.addEventListener('mouseleave', stop);
edgeR.addEventListener('mouseleave', stop);

/* Active on scroll/resize */
track.addEventListener('scroll', ()=>{ requestAnimationFrame(()=>setActive(idxCenter())); }, {passive:true});
window.addEventListener('resize', ()=>setActive(idxCenter()));

/* Disabled CTAs (pre‑launch) */
document.querySelectorAll('.btn[disabled]').forEach(b=>{
  b.addEventListener('click', ()=> alert('Le paiement sera activé au lancement officiel. Merci !'));
});

/* Hard nav */
(function(){
  function hardLink(page){ const base=location.pathname.replace(/[^\/]*$/,''); window.location.assign(base+page+'?v='+Date.now()); }
  document.addEventListener('click', e=>{ const a=e.target.closest('a[data-page]'); if(!a) return; e.preventDefault(); hardLink(a.getAttribute('data-page')); }, {passive:false});
})();
</script>
</body>
</html>
