<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Awenoria — Tarifs & formules</title>
<meta name="description" content="Le luxe de l’audit à prix démocratisé. Offres claires, remises en paiement en une fois, expérience premium et fluide.">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16.png">
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --ink:#0e2138; --muted:#6e7c8e;
  --accent:#ff7a1a; --accent-2:#ffb067;
  --red-copper:#e34d4b;
  --blue:#0d63a5; --blue-dark:#0a4f86;
  --bg-top:#f9fbfe; --bg:#eef4f9;
  --surface:#fff; --stroke:#e6eff7;
  --shadow-sm:0 14px 34px rgba(16,32,48,.10);
  --shadow-lg:0 68px 130px rgba(16,32,48,.22);
  --radius:28px;
  --hero-overlay-rgb:0,90,142; --hero-overlay-alpha:.42; --hero-overlay-alpha-mobile:.52;

  /* Apple-like */
  --apple-card-bg:#f5f5f7;
  --apple-card-outline:#e5e5ea;
  --apple-card-outline-strong:#d2d2d7;
  --apple-text:#1d1d1f;
  --apple-muted:#6e6e73;
  --apple-blue:#0071e3;
}

/* base */
*{box-sizing:border-box} html,body{margin:0}
body{font-family:Manrope,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,var(--bg-top),var(--bg));color:var(--ink);line-height:1.65}
a{text-decoration:none}
.container{max-width:1280px;margin:0 auto;padding:24px 22px}

/* ===== HEADER ===== */
.header{position:sticky;top:0;z-index:60;background:var(--bg-top);border-bottom:1px solid transparent;transition:.25s}
.header.scrolled{background:#fff;border-bottom-color:var(--stroke);box-shadow:0 10px 24px rgba(16,32,48,.06)}
.nav{display:flex;align-items:center;justify-content:space-between;gap:20px;min-height:84px}
.brand__logo{height:92px;width:auto} @media(min-width:992px){.brand__logo{height:100px}}
.mainnav{display:flex;gap:2px;margin-left:auto} .menu-item{list-style:none;position:relative}
.menu-link{display:inline-block;padding:14px 14px;border-radius:12px;color:#0b446e;font-weight:800;position:relative}
.menu-link:hover{color:var(--accent);background:rgba(13,99,165,.06)}
.menu-link::after{content:"";position:absolute;left:12px;right:12px;bottom:6px;height:3px;background:var(--accent);border-radius:2px;transform:scaleX(0);transition:.22s}
.menu-link:hover::after,.menu-link.active::after{transform:scaleX(1)} .menu-link.active{color:var(--accent)}
.dropdown{position:absolute;top:calc(100% + 10px);left:0;min-width:280px;padding:10px;background:#fff;border:1px solid var(--stroke);border-radius:14px;box-shadow:0 24px 48px rgba(16,32,48,.12);opacity:0;visibility:hidden;transform:translateY(8px);transition:.18s}
.menu-item:hover .dropdown{opacity:1;visibility:visible;transform:translateY(0)}
.dropdown a{display:flex;padding:10px 12px;border-radius:10px;color:#0b446e;font-weight:700}
.dropdown a:hover{background:#f3f8fc;color:var(--accent)}

/* ===== HERO ===== */
.hero--image{
  position:relative; text-align:center; color:#fff; overflow:hidden;
  min-height:40vh; display:grid; place-items:center;
  background:
    radial-gradient(1100px 520px at 10% -10%, rgba(255,255,255,.16), rgba(255,255,255,0) 60%),
    radial-gradient(1000px 600px at 120% 10%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, rgba(var(--hero-overlay-rgb), var(--hero-overlay-alpha)) 0%, rgba(var(--hero-overlay-rgb), var(--hero-overlay-alpha)) 100%),
    linear-gradient(180deg, #a9cfe5 0%, #98c5de 40%, #89bcd6 100%);
}
.hero--image .inner{position:relative; z-index:2; padding:56px 20px 24px}
.hero--image h1{margin:0 0 8px;font-size:54px;line-height:1.06;color:#fff}

/* ===== SECTION ===== */
.section{padding:22px 0 28px}
.section-title{margin:10px 0 6px;font-size:36px;color:#0d2440;text-align:center}

/* ===== SCÈNE ===== */
.scene{
  position:relative;
  height:86vh; min-height:720px; max-height:980px;
  margin:16px auto 0; border-radius:34px;
  background:linear-gradient(180deg,#f8fbff, #eef4fb);
  border:1px solid var(--stroke); box-shadow:var(--shadow-sm);
  overflow:visible; padding-bottom:64px;
}
.scene::before{
  content:""; position:absolute; left:50%; top:50%;
  width:min(1800px,110vw); height:min(1800px,110vw);
  transform:translate(-50%,-50%);
  background:radial-gradient(ellipse at center, rgba(255,255,255,.92) 0%, rgba(255,255,255,0) 62%);
  filter:blur(52px); pointer-events:none; z-index:0;
}
.viewport{position:absolute; inset:0; display:grid; align-items:center; overflow:visible}
.track{
  position:relative; display:flex; gap:48px; align-items:stretch;
  padding:40px 14vw 120px;
  overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;
  z-index:1; overflow-y:visible;
}
.track::-webkit-scrollbar{display:none}
.edge{position:absolute; top:0; bottom:0; width:11vw; z-index:3}
.edge.left{left:0} .edge.right{right:0}
.edge:after{content:""; position:absolute; inset:0; background:linear-gradient(90deg,rgba(255,255,255,.0),rgba(255,255,255,.7)); opacity:0; transition:.2s}
.edge.left:after{transform:scaleX(-1)}
.edge:hover:after{opacity:.35}

/* ===== CARTES ===== */
.card{
  scroll-snap-align:center; position:relative; flex:0 0 min(640px,92vw);
  border-radius:var(--radius); padding:32px 32px 26px; overflow:visible; isolation:isolate;
  background: var(--apple-card-bg);
  outline:1px solid var(--apple-card-outline);
  box-shadow: 0 16px 42px rgba(0,0,0,.08);
  transform-origin:center center; transition:.34s transform, .34s box-shadow, .34s opacity, .2s outline-color;
  filter:none; opacity:.86;
}
.card.center{
  transform:perspective(1300px) translateZ(0) scale(1.06);
  box-shadow:0 36px 90px rgba(0,0,0,.16);
  outline-color: var(--apple-card-outline-strong);
  opacity:1;
}
.card.left{transform:perspective(1300px) rotateY(4.5deg) scale(.96)}
.card.right{transform:perspective(1300px) rotateY(-4.5deg) scale(.96)}

.ribbon{
  position:absolute; top:-12px; left:18px; z-index:5;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:#fff; font-weight:900; font-size:12px; letter-spacing:.2px;
  border-radius:999px; padding:9px 14px; box-shadow:var(--shadow-sm)
}
.popular{position:absolute; top:-12px; right:18px; z-index:5; background:#0f2746; color:#fff; font-weight:900; font-size:12px; border-radius:999px; padding:9px 14px; box-shadow:var(--shadow-sm)}

/* Barre cuivrée sous les CTA (remplace le rond rouge + la barre pâle) */
.ribbon.dealbar{
  position:static;
  display:inline-flex; align-items:center; gap:10px;
  margin:12px 0 0;
  padding:10px 14px;
  border-radius:12px;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:#fff;
  font-weight:900; font-size:13px; letter-spacing:.2px;
  box-shadow:var(--shadow-sm);
  white-space:nowrap;
}

/* contenu carte */
.card .subtitle{
  margin:0 0 6px; text-align:left; color:var(--apple-muted);
  font: 800 12px/1 "SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif;
  letter-spacing:.12em; text-transform:uppercase;
}
.card .h3{
  margin:2px 0 10px; text-align:left; color:var(--apple-text);
  font: 900 clamp(22px,3.2vw,32px)/1.1 "SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif;
  letter-spacing:-.012em;
}
.price-row{display:flex;align-items:baseline;justify-content:flex-start;gap:8px;margin:2px 0 10px}
.price{font: 900 clamp(40px,5.4vw,56px)/1 "SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif; letter-spacing:-.01em; color:var(--apple-text)}
.per{font: 600 14px/1.3 "SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif; color:var(--apple-muted)}
.promise{margin:6px 0 2px;text-align:left;color:var(--apple-text);font:700 16px/1.35 "SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif}

/* avantages */
.features{margin:16px 0 0;padding:0;list-style:none}
.features li{display:flex;gap:12px;align-items:flex-start;margin:12px 0;color:var(--apple-text)}
.icon{flex:0 0 22px;height:22px;border-radius:999px;border:2px solid color-mix(in oklab, var(--apple-blue) 24%, var(--apple-card-outline));display:grid;place-items:center}
.icon:before{content:"";display:block;width:8px;height:14px;border-right:3px solid var(--apple-blue);border-bottom:3px solid var(--apple-blue);transform:rotate(45deg) translate(-1px,-2px)}

/* CTA */
.cta{display:flex;gap:12px;flex-wrap:wrap;justify-content:flex-start;margin-top:16px}
.btn{appearance:none;border:none;cursor:pointer;font-weight:800;font-size:16px;padding:14px 18px;border-radius:12px;color:#fff;background:linear-gradient(180deg,var(--apple-blue), color-mix(in oklab, var(--apple-blue) 78%, #003e7a 22%));box-shadow:0 10px 26px rgba(0,113,227,.18),inset 0 1px 0 rgba(255,255,255,.25);transition:.18s}
.btn:hover{filter:brightness(1.05)} .btn:active{transform:translateY(1px)}
.btn.ghost{background:#fff;color:var(--apple-text);border:1px solid var(--apple-card-outline);box-shadow:none}
.btn[disabled]{opacity:.55;cursor:not-allowed}
.note{margin-top:10px;color:var(--muted);font-size:13px;text-align:left}

/* détails */
.details{margin-top:12px;border:1px dashed #d9e6f3;border-radius:16px;background:#fbfeff;overflow:hidden;max-height:0;opacity:0;transition:max-height .3s ease, opacity .3s ease}
.card.show-details .details{max-height:240px;opacity:1}
.details-inner{padding:12px 14px;font-size:14px}
.details b{color:#0f2746}

/* Flèches — élégantes */
.arrow{
  position:absolute; top:50%; transform:translateY(-50%);
  z-index:4; width:64px; height:64px; border-radius:20px;
  background:
    radial-gradient(120% 120% at 30% 30%, rgba(255,255,255,.92) 0%, rgba(255,255,255,.55) 60%, rgba(255,255,255,0) 100%),
    linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.58));
  border:1px solid rgba(210,225,238,.90);
  box-shadow: 0 12px 28px rgba(16,32,48,.16), inset 0 1px 0 rgba(255,255,255,.85), inset 0 0 0 999px rgba(255,255,255,.02);
  backdrop-filter: blur(8px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  display:grid; place-items:center; cursor:pointer; user-select:none;
  color:#0b4e80;
  transition: transform .22s ease, box-shadow .22s ease, opacity .22s ease, background .22s ease, color .22s ease;
  opacity:.85;
}
.arrow::after{
  content:""; position:absolute; inset:0; border-radius:20px;
  background: conic-gradient(from 210deg at 30% 0%, rgba(255,255,255,.28), rgba(255,255,255,0) 35%, rgba(255,255,255,0) 70%, rgba(255,255,255,.18));
  mix-blend-mode:screen; opacity:.0; transition:opacity .25s ease;
}
.arrow:hover{ transform:translateY(-50%) scale(1.045); box-shadow:0 16px 36px rgba(16,32,48,.20), inset 0 1px 0 rgba(255,255,255,.95); opacity:1; }
.arrow:hover::after{ opacity:.6; }
.arrow svg{ width:26px; height:26px } .arrow svg path{ stroke: currentColor }
.arrow.left{ left:22px } .arrow.right{ right:22px }
.arrow[disabled], .arrow[aria-disabled="true"]{ opacity:.35; cursor:default; pointer-events:none; color:#8aa4bb; box-shadow:0 8px 18px rgba(16,32,48,.10), inset 0 1px 0 rgba(255,255,255,.75); }
@media(max-width:820px){.arrow{display:none}}
.arrow:focus-visible{ outline:0; box-shadow:0 0 0 3px rgba(0,113,227,.25), 0 12px 28px rgba(16,32,48,.16), inset 0 1px 0 rgba(255,255,255,.9) }

/* dots */
.dots{position:absolute; left:50%; bottom:16px; transform:translateX(-50%); display:flex; gap:10px; z-index:3}
.dot{width:10px;height:10px;border-radius:50%;background:#c7d9e6}
.dot.active{background:#0a4f86}

/* footer */
.footer{border-top:1px solid var(--stroke);padding:24px 0;margin-top:44px;color:#5c6a7a;font-size:14px}

/* Accessibilité motion */
@media (prefers-reduced-motion: reduce){
  .arrow, .card{ transition:none !important }
  .track{ scroll-behavior:auto }
}
</style>
</head>
<body>

<header id="site-header" class="header">
  <div class="container nav">
    <a href="./index.html" class="brand"><img src="./images/logo.png" alt="Awenoria" class="brand__logo"></a>
    <ul class="mainnav">
      <li class="menu-item"><a class="menu-link" href="index.html">Accueil</a></li>
      <li class="menu-item">
        <a class="menu-link active" href="#" data-page="audit.html">Audit ▾</a>
        <div class="dropdown">
          <a href="./fonctionnalites.html">• Fonctionnalités</a>
          <a href="./comment.html">• Méthodologie</a>
          <a href="./tarifs.html" aria-current="page"><b>• Tarifs</b></a>
        </div>
      </li>
      <li class="menu-item">
        <a class="menu-link" href="#ressources">Ressources ▾</a>
        <div class="dropdown">
          <a href="guides.html">• Guides & bonnes pratiques</a>
          <a href="modeles.html">• Modèles juridiques</a>
          <a href="#externes">• Articles externes</a>
          <a href="faq.html">• FAQ</a>
        </div>
      </li>
      <li class="menu-item"><a class="menu-link" href="a-propos.html">À propos</a></li>
      <li class="menu-item"><a class="menu-link" href="contact.html">Contact</a></li>
    </ul>
  </div>
</header>

<section class="hero--image">
  <div class="inner">
    <h1>Tarifs & formules</h1>
  </div>
</section>

<section class="section" aria-label="Offres Awenoria">
  <div class="container">
    <h2 class="section-title">Nos offres</h2>
  </div>

  <div class="scene">
    <div class="edge left"  id="edgeLeft"></div>
    <div class="edge right" id="edgeRight"></div>

    <button class="arrow left" id="prev" aria-label="Précédent">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M15 5l-7 7 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <button class="arrow right" id="next" aria-label="Suivant">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M9 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>

    <div class="viewport" role="region" aria-label="Carrousel des offres">
      <div class="track" id="track">
        <!-- Créateurs -->
        <article class="card" tabindex="0" data-plan="crea" data-monthly="1" data-annual="10" data-market="2">
          <span class="ribbon" data-ribbon></span>
          <p class="subtitle">Essentiel</p>
          <h3 class="h3">Créateurs</h3>
          <div class="price-row"><span class="price">1 €</span><span class="per">/ mois</span></div>
          <p class="promise">Le point de départ propre et rassurant.</p>

          <ul class="features">
            <li><span class="icon" aria-hidden="true"></span>Scan démo + synthèse immédiate</li>
            <li><span class="icon" aria-hidden="true"></span>Modèles de mentions légales</li>
            <li><span class="icon" aria-hidden="true"></span>Conseils RGPD indispensables</li>
          </ul>

          <div class="cta">
            <button class="btn" disabled>Essai 3 jours → Mensuel</button>
            <button class="btn ghost" disabled>Annuel 10 €</button>
            <button class="btn ghost" data-toggle>Détails</button>
          </div>

          <div class="details"><div class="details-inner" data-details></div></div>
          <p class="note">Paiement à l’ouverture commerciale.</p>
        </article>

        <!-- Micro & Assos -->
        <article class="card" tabindex="0" data-plan="micro" data-monthly="2" data-annual="20" data-market="5">
          <span class="ribbon" data-ribbon></span>
          <p class="subtitle">Le meilleur départ</p>
          <h3 class="h3">Micro & Assos</h3>
          <div class="price-row"><span class="price">2 €</span><span class="per">/ mois</span></div>
          <p class="promise">Tout ce qu’il faut, rien d’inutile.</p>

          <ul class="features">
            <li><span class="icon" aria-hidden="true"></span>Scan site + analyse PDF locale</li>
            <li><span class="icon" aria-hidden="true"></span>Rapport PDF “preuve d’audit”</li>
            <li><span class="icon" aria-hidden="true"></span>Templates RGPD/CGV prêts à remplir</li>
          </ul>

          <div class="cta">
            <button class="btn" disabled>Essai 3 jours → Mensuel</button>
            <button class="btn ghost" disabled>Annuel 20 €</button>
            <button class="btn ghost" data-toggle>Détails</button>
          </div>

          <div class="details"><div class="details-inner" data-details></div></div>
          <p class="note">Paiement à l’ouverture commerciale.</p>
        </article>

        <!-- Pros & Agences -->
        <article class="card" tabindex="0" data-plan="pros" data-monthly="9.9" data-annual="85" data-market="19">
          <span class="ribbon" data-ribbon></span>
          <span class="popular">Populaire</span>

          <p class="subtitle">Gain de temps maximal</p>
          <h3 class="h3">Pros & Agences</h3>
          <div class="price-row"><span class="price">9,90 €</span><span class="per">/ mois</span></div>
          <p class="promise">Productivité, rigueur, livrables prêts client.</p>

          <ul class="features">
            <li><span class="icon" aria-hidden="true"></span>Audit multi-thèmes (RGPD / A11y / Mentions)</li>
            <li><span class="icon" aria-hidden="true"></span>Génération & suivi de documents</li>
            <li><span class="icon" aria-hidden="true"></span>Portail client, export complet</li>
          </ul>

          <div class="cta">
            <button class="btn" disabled>Essai 3 jours → Mensuel</button>
            <button class="btn ghost" disabled>Annuel 85 €</button>
            <button class="btn ghost" data-toggle>Détails</button>
          </div>

          <div class="details"><div class="details-inner" data-details></div></div>
          <p class="note">Paiement à l’ouverture commerciale.</p>
        </article>
      </div>

      <div class="dots" id="dots" aria-hidden="false"></div>
    </div>
  </div>
</section>

<footer class="container footer">
  <div style="display:flex;gap:12px;justify-content:space-between;flex-wrap:wrap">
    <span>© <span id="year"></span> Awenoria</span>
    <span><a href="mentions.html">Mentions légales</a> · <a href="confidentialite.html">Confidentialité</a></span>
  </div>
</footer>

<script>
/* année + header sticky */
document.getElementById('year').textContent = new Date().getFullYear();
(function(){const h=document.getElementById('site-header');const t=()=>{h.classList.toggle('scrolled',window.scrollY>10)};t();window.addEventListener('scroll',t,{passive:true})})();

/* utils */
const euro=n=>(Math.round(n*100)/100).toLocaleString('fr-FR',{minimumFractionDigits:(n%1?2:0),maximumFractionDigits:2})+' €';
const pct =n=>(Math.round(n*10)/10).toLocaleString('fr-FR')+' %';

/* init cartes : rubans, détails, barre cuivrée sous CTA */
document.querySelectorAll('.card[data-plan]').forEach(card=>{
  const name = card.querySelector('.h3')?.textContent.trim() || '';
  const m=parseFloat(card.dataset.monthly||'0');
  const a=parseFloat(card.dataset.annual||'0');
  const market=parseFloat(card.dataset.market||'0');
  const yearFull=m*12, rate=yearFull?((yearFull-a)/yearFull*100):0;

  const rb=card.querySelector('[data-ribbon]');
  if(rb){
    rb.textContent=`Paiement en 1 fois : −${pct(rate)} (${euro(a)}/an)`;
    const cta = card.querySelector('.cta');
    if(cta){ cta.insertAdjacentElement('afterend', rb); rb.classList.add('dealbar'); }
  }

  const details=card.querySelector('[data-details]');
  if(details){
    const saveM=Math.max(0, market-m);
    const saveRate=market?saveM/market*100:0;
    const saveAn=Math.max(0, yearFull-a);
    details.innerHTML = `
      <b>${name}</b> — Prix marché estimé : <b>${euro(market)}/mois</b>.<br>
      Économie mensuelle : <b>${euro(saveM)}</b> (${pct(saveRate)}).<br>
      En paiement en une fois : <b>${euro(saveAn)}</b> gagnés / an (${pct(rate)} vs mensuel).
      <div class="note">Estimations indicatives — adaptez selon votre benchmark.</div>
    `;
  }

  /* bouton détails */
  card.querySelector('[data-toggle]')?.addEventListener('click',()=>card.classList.toggle('show-details'));
});

/* carrousel */
const track=document.getElementById('track');
const cards=[...track.querySelectorAll('.card')];
const dots=document.getElementById('dots');
const prev=document.getElementById('prev'), next=document.getElementById('next');

function idxCenter(){
  const mid=track.getBoundingClientRect().left + track.clientWidth/2;
  let k=0,dmin=1e9;
  cards.forEach((c,i)=>{const r=c.getBoundingClientRect(); const d=Math.abs((r.left+r.right)/2-mid); if(d<dmin){dmin=d;k=i;}});
  return k;
}
function updateArrows(i){
  const atStart = (i<=0), atEnd = (i>=cards.length-1);
  prev.toggleAttribute('disabled', atStart);
  next.toggleAttribute('disabled', atEnd);
  prev.setAttribute('aria-disabled', atStart);
  next.setAttribute('aria-disabled', atEnd);
}
function setActive(i){
  cards.forEach((c,j)=>{
    c.classList.toggle('center', j===i);
    c.classList.toggle('left', j<i);
    c.classList.toggle('right', j>i);
    const dist=Math.abs(j-i);
    c.style.opacity = c.classList.contains('center') ? 1 : (dist>=2 ? 0.62 : 0.86);
  });
  [...dots.children].forEach((d,j)=>d.classList.toggle('active', j===i));
  updateArrows(i);
}
function buildDots(){
  dots.innerHTML='';
  cards.forEach((_,i)=>{
    const s=document.createElement('span'); s.className='dot'+(i===0?' active':''); s.tabIndex=0; s.role='button';
    s.addEventListener('click',()=>goTo(i));
    s.addEventListener('keydown',e=>{ if(e.key==='Enter'||e.key===' '){e.preventDefault();goTo(i);} });
    dots.appendChild(s);
  });
}
buildDots(); setActive(0);

function goTo(i){
  i=Math.max(0,Math.min(cards.length-1,i));
  cards[i].scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'});
}
/* navigation par index (fiable) */
function goStep(dir=1){ const i = idxCenter(); goTo(i + dir); }
prev.addEventListener('click', ()=>goStep(-1));
next.addEventListener('click', ()=>goStep(+1));
document.addEventListener('keydown', (e)=>{ if (e.key==='ArrowLeft') goStep(-1); if (e.key==='ArrowRight') goStep(+1); });

/* clic carte = centrage */
cards.forEach((c,i)=>c.addEventListener('click', ()=>goTo(i)));

/* drag desktop */
let dragging=false, startX=0, scrollX=0;
track.addEventListener('pointerdown', e=>{dragging=true; startX=e.clientX; scrollX=track.scrollLeft; track.setPointerCapture(e.pointerId);});
track.addEventListener('pointermove', e=>{ if(!dragging) return; track.scrollLeft = scrollX - (e.clientX-startX);});
track.addEventListener('pointerup', ()=>{dragging=false});

/* molette : vertical = scroll page ; SHIFT ou deltaX = horizontal */
track.addEventListener('wheel', e=>{
  const wantsHorizontal = e.shiftKey || Math.abs(e.deltaX) > Math.abs(e.deltaY);
  if(wantsHorizontal){
    track.scrollLeft += (Math.abs(e.deltaX) > 0 ? e.deltaX : e.deltaY);
    e.preventDefault();
  }
},{passive:false});

/* auto-scroll au survol des bords */
const edgeL=document.getElementById('edgeLeft'), edgeR=document.getElementById('edgeRight');
let raf=null, dir=0;
function step(){ if(dir!==0){ track.scrollLeft += dir*12; raf=requestAnimationFrame(step); } }
function start(d){ dir=d; if(!raf) raf=requestAnimationFrame(step); }
function stop(){ dir=0; if(raf){cancelAnimationFrame(raf); raf=null;} }
edgeL.addEventListener('mouseenter', ()=>start(-1));
edgeR.addEventListener('mouseenter', ()=>start(+1));
edgeL.addEventListener('mouseleave', stop);
edgeR.addEventListener('mouseleave', stop);

/* recalc actif */
track.addEventListener('scroll', ()=>{ requestAnimationFrame(()=>setActive(idxCenter())); }, {passive:true});
window.addEventListener('resize', ()=>setActive(idxCenter()));

/* CTAs désactivées (pré-lancement) */
document.querySelectorAll('.btn[disabled]').forEach(b=>{
  b.addEventListener('click', ()=> alert('Le paiement sera activé au lancement officiel. Merci !'));
});

/* nav dure */
(function(){
  function hardLink(page){ const base=location.pathname.replace(/[^\/]*$/,''); window.location.assign(base+page+'?v='+Date.now()); }
  document.addEventListener('click', e=>{ const a=e.target.closest('a[data-page]'); if(!a) return; e.preventDefault(); hardLink(a.getAttribute('data-page')); }, {passive:false});
})();
</script>
</body>
</html>
