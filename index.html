<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Awenoria — Audit de conformité automatisé</title>
  <meta name="description" content="Testez la conformité RGPD, accessibilité et mentions légales de votre site, gratuitement.">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16.png">
  <meta name="theme-color" content="#005a8e">

  <!-- Police proche du style de ta référence -->
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Couleurs marque */
      --blue:#0073b6;
      --blue-dark:#005a8e;        /* dominant */
      --orange:#ff6600;           /* hover / accent */
      /* Thème clair pro */
      --bg:#edf3f7;               /* même teinte que la trame */
      --bg-grad: linear-gradient(180deg,#f7f9fc 0%, #edf3f7 100%);
      --surface:#ffffff;
      --stroke:#e6edf3;
      --text:#16233a;
      --muted:#5d6b7c;
      --radius:16px;
      --shadow-sm:0 4px 12px rgba(16,32,48,.06);
      --shadow-lg:0 14px 30px rgba(16,32,48,.10);
    }

    *{ box-sizing:border-box }
    body{
      margin:0; font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text); background:var(--bg-grad), var(--bg);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{ text-decoration:none }
    .container{ max-width:1160px; margin:0 auto; padding:24px 20px }

    /* ================= HEADER ================= */
    .header{
      position:sticky; top:0; z-index:60;
      background:var(--bg);                 /* même couleur que la trame (opaque) */
      border-bottom:1px solid var(--stroke);
      box-shadow:0 4px 10px rgba(0,0,0,.03);
      transition: background-color .25s ease, box-shadow .25s ease, border-color .25s ease;
    }
    .header.scrolled{
      background:#fff;                      /* devient blanc net au scroll */
      box-shadow:0 6px 20px rgba(16,32,48,.06);
    }
    .nav{ display:flex; align-items:center; justify-content:space-between; gap:20px; padding:12px 0 }

    /* Logo */
    .brand{ display:inline-flex; align-items:center; padding:4px 6px; border-radius:12px; transition: filter .2s ease, transform .08s ease }
    .brand__logo{ display:block; height:92px; width:auto }
    @media(min-width:992px){ .brand__logo{ height:100px } }
    .brand:hover{ filter: drop-shadow(0 6px 14px rgba(0,90,142,.10)) }
    .brand:active{ transform: scale(.99) }

    /* ===== MENU enrichi (bleu → orange + soulignage + sous-onglets) ===== */
    .mainnav{ display:flex; align-items:center; gap:8px }
    .menu-item{ list-style:none; position:relative }
    .menu-link{
      position:relative; display:inline-block; padding:12px 14px;
      color:var(--blue-dark); font-weight:800; letter-spacing:.1px;
      transition: color .2s ease;
    }
    .menu-link::after{
      content:""; position:absolute; left:10px; right:10px; bottom:-6px; height:3px;
      background:var(--orange); border-radius:2px;
      transform:scaleX(0); transform-origin:left; transition:transform .22s ease;
    }
    .menu-link:hover{ color:var(--orange) }
    .menu-link:hover::after, .menu-link.active::after{ transform:scaleX(1) }
    .menu-link.active{ color:var(--orange) }

    /* Sous-menus */
    .dropdown{
      position:absolute; top:100%; left:0; min-width:260px; padding:10px;
      background:#fff; border:1px solid var(--stroke); border-radius:14px; box-shadow:var(--shadow-lg);
      opacity:0; visibility:hidden; transform:translateY(8px);
      transition:opacity .18s ease, transform .18s ease, visibility .18s ease;
    }
    .dropdown a{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px; border-radius:10px; color:var(--blue-dark); font-weight:700;
      transition: background .18s ease, color .18s ease, transform .18s ease;
    }
    .dropdown a:hover{ background:#f3f8fc; color:var(--orange); transform:translateY(-1px) }
    .menu-item:hover .dropdown{ opacity:1; visibility:visible; transform:translateY(0) }

    /* ================= HERO ================= */
    .hero{ display:grid; gap:18px; text-align:center; padding:56px 0 40px }
    h1{ margin:0; font-size:44px; line-height:1.08; letter-spacing:.2px; color:var(--blue-dark) }
    .sub{ color:var(--muted); max-width:760px; margin:0 auto }

    .testbox{ display:flex; flex-wrap:wrap; gap:12px; justify-content:center; align-items:center; margin-top:18px }
    input.url{
      width:560px; max-width:92vw; padding:14px 16px; border-radius:12px; font-size:16px;
      color:#14233a; background:#fff; border:1px solid var(--stroke); outline:none;
      transition:border-color .18s ease, box-shadow .18s ease; box-shadow: var(--shadow-sm);
    }
    input.url:focus{ border-color: var(--blue); box-shadow:0 0 0 4px rgba(0,115,182,.12) }
    .btn{
      appearance:none; border:none; cursor:pointer; font-weight:800; font-size:16px;
      padding:14px 18px; border-radius:12px; color:#fff;
      background: var(--blue-dark);
      box-shadow: var(--shadow-lg), inset 0 1px 0 rgba(255,255,255,.35);
      transition: background .18s ease, transform .08s ease, filter .18s ease;
    }
    .btn:hover{ background: var(--orange); filter:brightness(1.02) }
    .btn:active{ transform: translateY(1px) }

    .result{
      margin-top:22px; background:var(--surface); border:1px solid var(--stroke);
      border-radius:var(--radius); box-shadow:var(--shadow-sm);
      padding:22px; display:none; text-align:left;
    }

    /* ================= VIGNETTES (6) ================= */
    .grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:20px; margin-top:26px }
    @media(max-width:900px){ .grid{ grid-template-columns:1fr } }

    .tile{
      position:relative; border-radius:var(--radius); background:var(--surface);
      border:1px solid var(--stroke); box-shadow:var(--shadow-sm);
      padding:20px; transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
    }
    .tile:hover{ transform: translateY(-4px); box-shadow: var(--shadow-lg); border-color:#d5e7f4 }
    .badge{ display:inline-block; background: var(--blue-dark); color:#fff; padding:6px 12px; border-radius:999px; font-size:12px; font-weight:800 }
    .tile h3{ margin:10px 0 6px; color:#0f2746 }
    .muted{ color:var(--muted); margin:0 }
    .tile .cta{ margin-top:12px; display:inline-block; font-weight:700; font-size:14px; color:var(--blue-dark); border-bottom:2px solid transparent; transition: color .18s ease, border-color .18s ease }
    .tile .cta:hover{ color:var(--orange); border-color:var(--orange) }

    /* ================= FOOTER ================= */
    .footer{ margin-top:44px; padding:24px 0; color:#5c6a7a; font-size:14px; border-top:1px solid var(--stroke) }
    .footer a{ color:#5c6a7a }
  </style>
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header id="site-header" class="header">
    <div class="container nav">
      <a href="./index.html" class="brand" title="Accueil">
        <img src="./images/logo.png" alt="Awenoria" class="brand__logo">
      </a>

      <!-- Menu enrichi adapté à ton activité -->
      <ul class="mainnav">
        <li class="menu-item"><a class="menu-link active" href="index.html">Accueil</a></li>

        <li class="menu-item">
          <a class="menu-link" href="fonctionnalites.html">Fonctionnalités</a>
        </li>

        <li class="menu-item">
          <a class="menu-link" href="javascript:void(0)">Conformité ▾</a>
          <div class="dropdown">
            <a href="fonctionnalites.html#rgpd">• Audit RGPD</a>
            <a href="fonctionnalites.html#a11y">• Audit Accessibilité</a>
            <a href="fonctionnalites.html#legal">• Vérification Mentions légales</a>
          </div>
        </li>

        <li class="menu-item">
          <a class="menu-link" href="javascript:void(0)">Ressources ▾</a>
          <div class="dropdown">
            <a href="guides.html">• Guides & bonnes pratiques</a>
            <a href="modeles.html">• Modèles juridiques</a>
            <a href="faq.html">• FAQ</a>
          </div>
        </li>

        <li class="menu-item"><a class="menu-link" href="comment.html">Comment ça marche</a></li>
        <li class="menu-item"><a class="menu-link" href="tarifs.html">Tarifs</a></li>

        <li class="menu-item">
          <a class="menu-link" href="javascript:void(0)">Nous découvrir ▾</a>
          <div class="dropdown">
            <a href="a%20propos.html">• À propos</a>
            <a href="mentions.html">• Mentions légales</a>
            <a href="confidentialite.html">• Confidentialité</a>
          </div>
        </li>

        <li class="menu-item"><a class="menu-link" href="contact.html">Contact</a></li>
      </ul>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <main class="container">
    <section class="hero">
      <h1>Audit automatique de conformité</h1>
      <p class="sub">Testez la conformité RGPD, accessibilité et mentions légales de votre site en un clic.</p>

      <div class="testbox">
        <input id="url" class="url" type="text" placeholder="https://votresite.fr" />
        <button class="btn" onclick="analyser()">Analyser</button>
      </div>

      <div id="resultat" class="result" aria-live="polite"></div>

      <!-- ===== 6 VIGNETTES ===== -->
      <div class="grid">
        <article class="tile">
          <span class="badge">RGPD</span>
          <h3>Politique & cookies</h3>
          <p class="muted">Politique, base légale, droits, DPO, bandeau cookies.</p>
          <a class="cta" href="fonctionnalites.html#rgpd">Voir détails →</a>
        </article>

        <article class="tile">
          <span class="badge">Accessibilité</span>
          <h3>Points A11y clés</h3>
          <p class="muted">ALT, repères ARIA, contrastes, déclaration d’accessibilité.</p>
          <a class="cta" href="fonctionnalites.html#a11y">Voir détails →</a>
        </article>

        <article class="tile">
          <span class="badge">Mentions</span>
          <h3>Mentions & e-commerce</h3>
          <p class="muted">Éditeur, hébergeur, RCS/SIREN, CGV/CGU, rétractation.</p>
          <a class="cta" href="fonctionnalites.html#legal">Voir détails →</a>
        </article>

        <article class="tile">
          <span class="badge">1</span>
          <h3>Analyse locale</h3>
          <p class="muted">Tout s’exécute côté navigateur. Aucun stockage.</p>
          <a class="cta" href="comment.html#step1">Voir le pas-à-pas →</a>
        </article>

        <article class="tile">
          <span class="badge">2</span>
          <h3>Diagnostic priorisé</h3>
          <p class="muted">Score global + 3 recommandations par thématique.</p>
          <a class="cta" href="comment.html#step2">Voir le pas-à-pas →</a>
        </article>

        <article class="tile">
          <span class="badge">3</span>
          <h3>Suite (bientôt)</h3>
          <p class="muted">Rapport PDF, modèles juridiques, historique & suivi.</p>
          <a class="cta" href="fonctionnalites.html#suite">Voir la roadmap →</a>
        </article>
      </div>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="container footer">
    <div style="display:flex;gap:12px;justify-content:space-between;flex-wrap:wrap">
      <span>© <span id="year"></span> Awenoria</span>
      <span>
        <a href="mentions.html">Mentions légales</a> ·
        <a href="confidentialite.html">Confidentialité</a>
      </span>
    </div>
  </footer>

  <script>
    // année dynamique
    document.getElementById('year').textContent = new Date().getFullYear();

    // Header : même couleur que la trame au top → blanc en scroll
    (function(){
      const header = document.getElementById('site-header');
      const toggle = () => {
        if (window.scrollY > 10) header.classList.add('scrolled');
        else header.classList.remove('scrolled');
      };
      toggle();
      window.addEventListener('scroll', toggle, { passive:true });
    })();

    // Cloudflare Worker (analyse)
    const WORKER_URL = "https://awenoria.bmavcontact.workers.dev/analyze";
    const normalizeUrl = u => { if(!u) return ""; u=u.trim(); if(!/^https?:\/\//i.test(u)) u="https://"+u; return u; };
    const pct = n => Number.isFinite(n) ? `${Math.round(n)}%` : "—";

    async function analyser(){
      const input=document.getElementById('url');
      const site=normalizeUrl(input.value);
      if(!site){ alert("Merci d'entrer une URL."); return; }

      const box=document.getElementById('resultat');
      box.style.display='block';
      box.innerHTML='<p>Analyse en cours…</p>';

      try{
        const res = await fetch(`${WORKER_URL}?url=${encodeURIComponent(site)}`, { headers:{accept:"application/json"} });
        const data = await res.json();
        if(!res.ok || data.ok===false) throw new Error(data?.error || `Erreur (${res.status})`);

        const s=data.scores||{}, rgpd=data.rgpd||{}, legal=data.legal||{}, a11y=data.a11y||{};
        box.innerHTML = `
          <h2 style="margin:0 0 8px">Résultats pour <b>${data.finalUrl||site}</b></h2>
          <p><b>Score global :</b> ${pct(s.global)}</p>
          <ul style="list-style:none;padding:0;line-height:1.9;margin:0">
            <li>🔹 <b>RGPD</b> : ${pct(s.rgpd)} ${rgpd.policyLink?"• Politique détectée":"• Politique non détectée"} ${rgpd.cookiesWords?"• Cookies":""}</li>
            <li>🔹 <b>Mentions légales</b> : ${pct(s.mentions)} ${legal.mentionsLink?"• Lien détecté":"• Non détecté"}</li>
            <li>🔹 <b>Accessibilité</b> : ${pct(s.accessibilite)} • ALT: ${a11y.imgWithAlt||0}/${a11y.imgCount||0}</li>
          </ul>`;
      }catch(e){
        box.innerHTML = `<p style="color:#b3261e"><b>Erreur :</b> ${e.message}</p>`;
        console.error(e);
      }
    }
  </script>
</body>
</html>
