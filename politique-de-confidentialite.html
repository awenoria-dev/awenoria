<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Confidentialité — Awenoria</title>
  <meta name="description" content="Politique de protection des données d'Awenoria : finalités, bases légales, destinataires, durées de conservation, transferts, droits RGPD et contact DPO.">
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/awenoria.css">

  <style>
    :root{
      --aw-ink:#9DA1A8;
      --aw-blue:#7fbfff;
      --aw-blue-hover:#3d8bff;
      --aw-copper:#ff5c00; --aw-muted:#a1a9c0;
      --aw-panel:#ffffff; --aw-bg:#f5f7ff;
      --aw-radius:24px;
      --shadow:0 25px 50px -12px rgba(0,0,0,.15);
      --transition:.6s cubic-bezier(.22,1,.36,1);
    }
    @media (prefers-color-scheme:dark){
      :root{
        --aw-ink:#9DA1A8;
        --aw-blue:#7fbfff;
        --aw-blue-hover:#3d8bff;
        --aw-copper:#ff8a3d; --aw-muted:#a1a9c0;
        --aw-panel:#0b0f1a; --aw-bg:#0a0d14;
        --shadow:0 25px 50px -12px rgba(0,0,0,.45);
      }
    }

    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family:"Inter",system-ui,-apple-system,Arial,sans-serif;
      line-height:1.7; color:var(--aw-ink); background:var(--aw-bg); -webkit-font-smoothing:antialiased;
    }
    a{text-decoration:none;color:var(--aw-blue)}
    img{max-width:100%;display:block}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}

    /* ---------- Hero (identique aux autres pages) ---------- */
    .hero{
      position:relative; min-height:60vh; min-height:60svh;
      display:flex; align-items:center; justify-content:center;
      text-align:center; color:#fff; overflow:hidden;
      background:
        radial-gradient(140% 150% at 10% -20%, rgba(255,255,255,.15), transparent 60%),
        radial-gradient(120% 120% at 120% 10%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(180deg, #0033cc 0%, #0066ff 100%);
    }
    .hero canvas{position:absolute; inset:0; width:100%; height:100%; z-index:0;}
    .hero .content{position:relative; z-index:2; max-width:900px; padding:0 20px; animation:fadeInUp 1s both;}
    .hero h1{font-size:clamp(48px,6.5vw,72px); font-weight:800; line-height:1.05; letter-spacing:-.02em;}
    .hero .lead{font-size:1.25rem; font-weight:500; margin:18px auto 0; color:#e8f0ff;}

    /* ---------- Sections ---------- */
    .section{max-width:1200px; margin:0 auto; padding:100px 20px;}
    .section.alt{background:var(--aw-bg);}
    .title{margin:0 0 10px; text-align:center; font-size:clamp(30px,4.5vw,42px); color:#0F5F9A; font-weight:800;}
    .title::after{content:''; display:block; width:60px; height:4px; background:var(--aw-copper); margin:10px auto 0; border-radius:3px;}

    .grid{display:grid; grid-template-columns:2fr 1fr; gap:24px; margin-top:18px;}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    .card{
      background:var(--aw-panel); border:1px solid rgba(15,95,154,.12);
      border-radius:var(--aw-radius); box-shadow:var(--shadow);
      padding:24px; transition:all var(--transition);
    }
    .card:hover{transform:translateY(-4px); box-shadow:0 28px 56px rgba(15,95,154,.15); border-color:var(--aw-copper);}

    .muted{color:var(--aw-muted)}
    /* titres de section = effet logo */
    h2{margin:18px 0 8px; font-size:22px; background:linear-gradient(135deg,#0F5F9A 0%,#0d5285 100%);-webkit-background-clip:text;background-clip:text;color:transparent}
    h3{margin:16px 0 8px; font-size:18px; background:linear-gradient(135deg,#0F5F9A 0%,#0d5285 100%);-webkit-background-clip:text;background-clip:text;color:transparent}

    /* Table (héritage minimal si utilisé ailleurs) */
    table{width:100%; border-collapse:collapse; margin-top:6px;color:#9DA1A8}
    th,td{padding:12px; border:1px solid rgba(15,95,154,.12); text-align:left; vertical-align:top}
    th{background:#f9fbff; font-weight:800; color:#0F5F9A}

    /* Boutons */
    .btn{
      display:inline-flex; align-items:center; justify-content:center; padding:10px 14px; border-radius:12px; font-weight:800;
      color:#fff; background:var(--aw-blue); border:none; cursor:pointer; transition:all var(--transition);
      box-shadow:var(--shadow);
    }
    .btn:hover{background:var(--aw-copper); transform:translateY(-2px);}
    .btn.ghost{background:var(--aw-panel); color:var(--aw-blue); border:1px solid rgba(15,95,154,.12);}
    .btn.ghost:hover{border-color:var(--aw-copper); color:var(--aw-copper);}

    /* Anim */
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:none}}

    /* ===== Modale Awenoria ===== */
    .aw-modal[hidden]{ display:none !important; }
    .aw-modal{ position:fixed; inset:0; z-index:1000; }
    .aw-modal__backdrop{
      position:absolute; inset:0;
      background:rgba(5,10,20,.55);
      backdrop-filter:saturate(1.2) blur(6px);
    }
    .aw-modal__dialog{
      position:relative; margin:auto; inset:0;
      max-width:min(1100px, 92vw);
      max-height:min(86vh, 1000px);
      background:var(--aw-panel);
      border:1px solid rgba(15,95,154,.18);
      border-radius:calc(var(--aw-radius) + 8px);
      box-shadow:0 40px 90px -20px rgba(0,0,0,.35);
      padding:22px 22px 18px;
      overflow:hidden;
      animation:aw-zoom .18s ease-out;
    }
    @keyframes aw-zoom {
      from{ transform:scale(.96); opacity:0; } to{ transform:scale(1); opacity:1; }
    }
    .aw-modal__title{
      margin:4px 0 12px;
      font-size:1.1rem;
      font-weight:800;
      background:linear-gradient(135deg,#0F5F9A 0%,#0d5285 100%);
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .aw-modal__close{
      position:absolute; top:10px; right:10px;
      width:40px; height:40px; line-height:40px;
      border-radius:999px; border:1px solid rgba(15,95,154,.22);
      background:var(--aw-panel); color:#a7b4c8;
      font-size:28px; font-weight:700; cursor:pointer;
      box-shadow:var(--shadow); transition:transform .12s ease, background .2s ease;
    }
    .aw-modal__close:hover{ transform:scale(1.06); color:var(--aw-copper); border-color:var(--aw-copper); }

    /* ===== Tableau modale amélioré ===== */
    .aw-table-wrap{
      position:relative;
      overflow:auto;
      max-height:calc(86vh - 92px);
      border-radius:calc(var(--aw-radius) + 4px);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
    }
    .aw-table{
      width:100%; border-collapse:separate; border-spacing:0;
      font-size:.95rem; color:var(--aw-ink);
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
    }
    .aw-table thead th{
      position:sticky; top:0; z-index:2;
      background:linear-gradient(180deg,#f9fbff 0%, #eef5ff 100%);
      color:#0F5F9A; text-align:left; font-weight:800; letter-spacing:.2px;
      border-bottom:1px solid rgba(15,95,154,.18);
      padding:14px 14px; 
    }
    @media (prefers-color-scheme:dark){
      .aw-table thead th{ background:linear-gradient(180deg,#0f1525 0%, #0b1120 100%); }
    }
    .aw-table td{
      background:rgba(255,255,255,.02);
      border-bottom:1px solid rgba(15,95,154,.12);
      vertical-align:top; padding:14px;
    }
    .aw-table tbody tr:nth-child(odd) td{ background:rgba(255,255,255,.03); }
    .aw-table tbody tr:hover td{ background:rgba(255,255,255,.06); }

    /* Coins arrondis visuels sur le premier et dernier th/td */
    .aw-table thead th:first-child{ border-top-left-radius:16px; }
    .aw-table thead th:last-child{ border-top-right-radius:16px; }
    .aw-table tbody tr:last-child td:first-child{ border-bottom-left-radius:16px; }
    .aw-table tbody tr:last-child td:last-child{ border-bottom-right-radius:16px; }

    /* Scrollbar subtile */
    .aw-table-wrap::-webkit-scrollbar{ height:10px; width:10px; }
    .aw-table-wrap::-webkit-scrollbar-thumb{
      background:rgba(15,95,154,.35); border-radius:999px; border:2px solid transparent; background-clip:padding-box;
    }
    .aw-table-wrap::-webkit-scrollbar-track{ background:transparent; }

    /* survol orange pour tous les liens du texte */
    a:hover { color: var(--aw-copper) !important; }
  </style>
</head>
<body class="page-confidentialite">

  <!-- Header injecté -->
  <div id="header"></div>

  <!-- HERO bleu identique -->
  <section class="hero">
    <canvas id="canvas" aria-hidden="true"></canvas>
    <div class="content">
      <h1>Politique de confidentialité</h1>
      <p class="lead">Comment Awenoria traite les données personnelles : finalités, bases légales, durées, destinataires, transferts et vos droits.</p>
    </div>
  </section>

  <main>
    <section class="section">
      <div class="container grid">
        <!-- Colonne principale -->
        <article class="card">
          <h2>1) Responsable de traitement</h2>
          <p style="color:#9DA1A8">L'<b>éditeur du site Awenoria</b> (voir <a href="mentions.html">Mentions légales</a>) est responsable des traitements décrits ci-dessous.<br>
          Contact confidentialité / DPO : <a href="mailto:vosdroits@dpoawenoria.fr">vosdroits@dpoawenoria.fr</a> (objet : « Droit des personnes »).<br>
          Contact général : <a href="mailto:contact@dpoawenoria.fr">contact@dpoawenoria.fr</a>.</p>

          <h2>2) Quelles données, pourquoi et sur quelle base ?</h2>

          <!-- Bouton d'ouverture de la modale -->
          <button class="btn" id="openTableBtn" aria-haspopup="dialog" aria-controls="tableModal">
            Afficher le tableau
          </button>

          <!-- Modale contenant le tableau (fermée par défaut) -->
          <div id="tableModal" class="aw-modal" role="dialog" aria-modal="true" aria-labelledby="tableTitle" hidden>
            <div class="aw-modal__backdrop" data-aw-close></div>
            <div class="aw-modal__dialog" role="document">
              <button class="aw-modal__close" aria-label="Fermer" title="Fermer" data-aw-close>&times;</button>

              <h3 id="tableTitle" class="aw-modal__title">Données traitées — détail</h3>
              <div class="aw-table-wrap">
                <!-- Le tableau sera cloné ici depuis le template -->
              </div>
            </div>
          </div>

          <!-- Le tableau original est stocké dans un template -->
          <template id="rgpdTableTpl">
            <table class="aw-table">
              <thead>
                <tr><th>Finalité</th><th>Données traitées</th><th>Base légale</th><th>Durée de conservation</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td><b>Diagnostic automatique</b> de pages publiques (audit RGPD / accessibilité / mentions / cookies)</td>
                  <td>URL saisie, logs techniques nécessaires au fonctionnement ; par défaut, l'analyse s'effectue <b>localement dans votre navigateur</b>. Si vous activez des options (ex : export PDF côté service), des métadonnées minimales peuvent transiter (URL, horodatage, scores).</td>
                  <td>Intérêt légitime (art. 6-1 f) : fournir un outil de diagnostic fiable et sécurisé.</td>
                  <td><b>Local</b> : pas de stockage par nos soins.<br><b>Serveur (option)</b> : métadonnées d'audit ≤ 6 mois.</td>
                </tr>
                <tr>
                  <td><b>Formulaire de contact</b> et suivi des demandes</td>
                  <td>Identité, société, email, téléphone, contenu du message</td>
                  <td>Intérêt légitime (répondre à vos demandes)</td>
                  <td>Jusqu'à 3 ans après le dernier échange, puis archivage légal si nécessaire</td>
                </tr>
                <tr>
                  <td><b>Prospection B2B</b> (avec votre accord)</td>
                  <td>Nom, email professionnel, préférences</td>
                  <td>Consentement (art. 6-1 a)</td>
                  <td>Jusqu'au retrait du consentement ou 3 ans d'inactivité</td>
                </tr>
                <tr>
                  <td><b>Mesure d'audience</b></td>
                  <td>Identifiants de cookies/traceurs, pages vues, événements agrégés/anonymisés</td>
                  <td>Consentement (sauf mesure strictement nécessaire / ex. exemptée)</td>
                  <td>Jusqu'à 13 mois (statistiques), choix de consentement : 6 mois</td>
                </tr>
                <tr>
                  <td><b>Sécurité / logs</b></td>
                  <td>Logs techniques (IP, user-agent, événements sécurité)</td>
                  <td>Intérêt légitime (sécuriser le service)</td>
                  <td>Jusqu'à 6 mois (sauf événement nécessitant conservation plus longue)</td>
                </tr>
                <tr>
                  <td><b>Preuve du consentement cookies</b></td>
                  <td>Journal local des choix, horodatage (stockage côté navigateur)</td>
                  <td>Obligation CNIL (preuve du consentement) + intérêt légitime</td>
                  <td>6 mois (renouvelable)</td>
                </tr>
              </tbody>
            </table>
          </template>

          <h2>3) Origine des données</h2>
          <p style="color:#9DA1A8">Les données proviennent directement de vous (saisie formulaire, préférences cookies) et de votre activité sur le site (logs techniques, mesures d'audience anonymisées le cas échéant).</p>

          <h2>4) Destinataires</h2>
          <ul style="color:#9DA1A8">
            <li>Équipe Awenoria et personnes habilitées à traiter les demandes.</li>
            <li>Hébergeurs et prestataires techniques (ex. hébergement du site / CDN, solutions d'analytique si activées).</li>
            <li>Le cas échéant, sous-traitants impliqués dans l'exécution de nos services (contrats, confidentialité et sécurité à l'appui).</li>
          </ul>

          <h2>5) Transferts hors UE</h2>
          <p style="color:#9DA1A8">Certaines solutions peuvent être situées hors UE. Dans ce cas, nous appliquons un <b>mécanisme de transfert</b> adéquat (décision d'adéquation, clauses contractuelles types), assorti de garanties appropriées.</p>

          <h2>6) Vos droits</h2>
          <p style="color:#9DA1A8">Vous disposez des droits d'<b>accès</b>, <b>rectification</b>, <b>effacement</b>, <b>limitation</b>, <b>opposition</b> et <b>portabilité</b>, ainsi que du droit de définir des <b>directives post-mortem</b>.<br>
          Pour l'emailing/prospection fondé sur le consentement, vous pouvez retirer votre consentement à tout moment.</p>
          <p style="color:#9DA1A8">Exercer vos droits : <a href="mailto:vosdroits@dpoawenoria.fr">vosdroits@dpoawenoria.fr</a> (objet : « Droit des personnes »). Une vérification d'identité peut être nécessaire.</p>
          <p style="color:#9DA1A8">Réclamation : <b>CNIL</b> — <a href="https://www.cnil.fr">cnil.fr</a>, 3 Place de Fontenoy, TSA 80715, 75334 Paris Cedex 07.</p>

          <h2>7) Sécurité</h2>
          <p style="color:#9DA1A8">Mesures techniques et organisationnelles proportionnées : HTTPS, contrôles d'accès, journalisation sécurité, conservation limitée, revues régulières.</p>

          <h2>8) Cookies & traceurs</h2>
          <p style="color:#9DA1A8">Voir notre <a href="politique-cookies.html">Politique cookies</a> pour les catégories, durées et la gestion des choix.<br>
            Vous pouvez <b>modifier vos préférences</b> à tout moment :
            <button class="btn" onclick="(window.AwenoriaConsent||{}).open?.()">Gérer mes cookies</button>
          </p>

          <p class="muted" style="color:#9DA1A8">Dernière mise à jour : <span id="lastUpdate">—</span></p>
        </article>

        <!-- Colonne latérale -->
        <aside class="card">
          <h3 style="color:#0F5F9A">Raccourcis utiles</h3>
          <p><a class="btn" href="#" onclick="(window.AwenoriaConsent||{}).open?.();return false;">Gérer mes cookies</a></p>
          <p><a href="politique-cookies.html" style="color:#9DA1A8">Politique cookies</a></p>
          <p><a href="mentions.html" style="color:#9DA1A8">Mentions légales</a></p>
          <p><a href="contact.html" style="color:#9DA1A8">Contact</a></p>

          <h3 style="margin-top:18px;color:#0F5F9A">Rappels pratiques</h3>
          <ul style="color:#9DA1A8">
            <li>Analyse par défaut <b>locale</b> (navigateur).</li>
            <li>Options serveur (ex. export PDF) : métadonnées minimales.</li>
            <li>Refus aussi simple que l'acceptation (cookies).</li>
          </ul>

          <!-- Lien optionnel pour ouvrir la modale depuis l'aside -->
          <p><a href="#table" class="btn ghost" onclick="document.getElementById('openTableBtn').click(); return false;">Voir le tableau</a></p>
        </aside>
      </div>
    </section>
  </main>

  <!-- Footer injecté -->
  <div id="footer"></div>

  <!-- ===== JS : canvas hero + utilitaires ===== -->
  <script>
    // Année + date de MAJ
    document.addEventListener('DOMContentLoaded', () => {
      const lu = document.getElementById('lastUpdate');
      if (lu) lu.textContent = '2025-10-15';
    });

    // Hero canvas (particules identiques aux autres pages)
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = innerWidth;
    let h = canvas.height = innerHeight;
    const particles = [];
    const opts = {count:60,speed:.3,radius:2,distance:120,color:'rgba(255,255,255,.25)'};

    addEventListener('resize', () => { w = canvas.width = innerWidth; h = canvas.height = innerHeight; });

    class Particle{
      constructor(){ this.x=Math.random()*w; this.y=Math.random()*h; this.vx=(Math.random()-.5)*opts.speed; this.vy=(Math.random()-.5)*opts.speed; }
      update(){ this.x+=this.vx; this.y+=this.vy; if(this.x<0||this.x>w) this.vx*=-1; if(this.y<0||this.y>h) this.vy*=-1; }
      draw(){ ctx.beginPath(); ctx.arc(this.x,this.y,opts.radius,0,Math.PI*2); ctx.fillStyle=opts.color; ctx.fill(); }
      lines(){ particles.forEach(p=>{ const d=Math.hypot(this.x-p.x,this.y-p.y); if(d<opts.distance){ ctx.beginPath(); ctx.moveTo(this.x,this.y); ctx.lineTo(p.x,p.y); ctx.strokeStyle=`rgba(255,255,255,${1-d/opts.distance})`; ctx.stroke(); } }); }
    }
    function init(){ particles.length=0; for(let i=0;i<opts.count;i++) particles.push(new Particle()); }
    function animate(){ ctx.clearRect(0,0,w,h); particles.forEach(p=>{ p.update(); p.draw(); p.lines(); }); requestAnimationFrame(animate); }
    init(); animate();
  </script>

  <!-- ===== Loader header/footer + nav ===== -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const headMount = document.getElementById("header");
    const footMount = document.getElementById("footer");
    if (!headMount && !footMount) return;

    const isGh = /github\.io$/.test(location.hostname);
    let base = "/";
    if (isGh) {
      const parts = location.pathname.split("/").filter(Boolean);
      base = parts.length ? `/${parts[0]}/` : "/";
    }

    const candidates = (p) => {
      const clean = p.replace(/^\//, "");
      return [ base + clean, "./" + clean, "../" + clean ];
    };

    async function fetchAny(paths) {
      const queue = paths.flatMap(candidates);
      for (const u of queue) {
        try { const r = await fetch(u, { cache: "no-cache" }); if (r.ok) return r.text(); } catch(_) {}
      }
      throw new Error("Aucun chemin valide parmi: " + paths.join(", "));
    }

    function fixRootUrls(container) {
      container.querySelectorAll('a[href^="/"], img[src^="/"], link[href^="/"], script[src^="/"]')
        .forEach(el => {
          const attr = el.hasAttribute("href") ? "href" : "src";
          const val = el.getAttribute(attr);
          if (/^\/\//.test(val)) return;
          el.setAttribute(attr, base + val.replace(/^\//, ""));
        });
    }

    // HEADER
    if (headMount) {
      fetchAny(["header.html", "partials/header.html"])
        .then(html => {
          headMount.innerHTML = html;
          fixRootUrls(headMount);
          return fetchAny(["assets/nav.js", "nav.js"]);
        })
        .then(code => {
          const s = document.createElement("script");
          if (/\b(import|export)\b/.test(code)) s.type = "module";
          s.textContent = code;
          document.body.appendChild(s);
          console.log("[awenoria] header + nav chargés");
        })
        .catch(err => {
          console.error("Header load error:", err);
          headMount.innerHTML = "<!-- Header introuvable -->";
        });
    }

    // FOOTER
    if (footMount) {
      fetchAny(["footer.html", "partials/footer.html"])
        .then(html => { footMount.innerHTML = html; fixRootUrls(footMount); })
        .catch(err => {
          console.error("Footer load error:", err);
          footMount.innerHTML = "<!-- Footer introuvable -->";
        });
    }
  });
  </script>

  <!-- ===== JS : Modale tableau RGPD ===== -->
  <script>
  (function(){
    const modal = document.getElementById('tableModal');
    const openBtn = document.getElementById('openTableBtn');
    const tableHost = modal?.querySelector('.aw-table-wrap');
    const tpl = document.getElementById('rgpdTableTpl');

    if(!modal || !openBtn || !tpl || !tableHost) return;

    // Clone le tableau depuis le template (une seule fois)
    const tableContent = tpl.content.cloneNode(true);
    tableHost.appendChild(tableContent);

    let lastFocused = null;

    function openModal(){
      lastFocused = document.activeElement;
      modal.hidden = false;
      document.body.style.overflow = 'hidden';
      modal.querySelector('.aw-modal__close')?.focus();
      bindFocusTrap();
    }
    function closeModal(){
      modal.hidden = true;
      document.body.style.overflow = '';
      unbindFocusTrap();
      openBtn.focus();
    }

    // Écouteurs
    openBtn.addEventListener('click', openModal);
    modal.addEventListener('click', (e)=>{
      if(e.target.matches('[data-aw-close], .aw-modal__backdrop')) closeModal();
    });
    window.addEventListener('keydown', (e)=>{
      if(modal.hidden) return;
      if(e.key === 'Escape') { e.preventDefault(); closeModal(); }
    });

    // Trap focus (accessibilité)
    let trapHandler = null;
    function focusables(){
      return [...modal.querySelectorAll('a, button, textarea, input, select, [tabindex]:not([tabindex="-1"])')]
        .filter(el => !el.hasAttribute('disabled') && el.offsetParent !== null);
    }
    function bindFocusTrap(){
      trapHandler = (e)=>{
        if(e.key !== 'Tab') return;
        const els = focusables();
        if(!els.length) return;
        const first = els[0], last = els[els.length - 1];
        if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
      };
      document.addEventListener('keydown', trapHandler);
    }
    function unbindFocusTrap(){
      if(trapHandler){ document.removeEventListener('keydown', trapHandler); trapHandler = null; }
    }

    // Option : ouvrir via hash #table
    if(location.hash === '#table'){ openModal(); }
  })();
  </script>
</body>
</html>
