<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Mod√®les juridiques ‚Äî Awenoria (√âditeur intelligent)</title>
  <meta name="description" content="Mod√®les pr√™ts √† l‚Äôemploi avec √©diteur rapide et avanc√© : politique de confidentialit√©, cookies, mentions l√©gales, clauses formulaires, emailing, CGV."/>
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32-dark.png" media="(prefers-color-scheme: dark)">
  <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16-dark.png" media="(prefers-color-scheme: dark)">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/awenoria.css">
  <base target="_blank">

  <style>
    :root{
      --aw-ink:#0a0a0a;
      --aw-blue:#0066ff;
      --aw-blue-hover:#3d8bff;
      --aw-copper:#ff5c00;
      --aw-muted:#6b7280;
      --aw-panel:#ffffff;
      --aw-bg:#f5f7ff;
      --aw-radius:24px;
      --shadow:0 25px 50px -12px rgba(0,0,0,.15);
      --transition:.6s cubic-bezier(.22,1,.36,1);
    }
    @media (prefers-color-scheme:dark){
      :root{
        --aw-ink:#f5f7ff; --aw-blue:#3d8bff; --aw-blue-hover:#5ca0ff; --aw-copper:#ff8a3d;
        --aw-muted:#a1a9c0; --aw-panel:#0b0f1a; --aw-bg:#0a0d14; --shadow:0 25px 50px -12px rgba(0,0,0,.45);
      }
    }
    body.theme-dark{
      --aw-ink:#f5f7ff; --aw-blue:#3d8bff; --aw-blue-hover:#5ca0ff; --aw-copper:#ff8a3d;
      --aw-muted:#a1a9c0; --aw-panel:#0b0f1a; --aw-bg:#0a0d14; --shadow:0 25px 50px -12px rgba(0,0,0,.45);
    }

    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{font-family:"Inter",system-ui,-apple-system,Arial,sans-serif;line-height:1.7;color:var(--aw-ink);background:var(--aw-bg);-webkit-font-smoothing:antialiased}
    a{text-decoration:none;color:var(--aw-blue)}
    img{max-width:100%;display:block}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}

    /* Skip link */
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:10px;top:10px;width:auto;height:auto;z-index:1000;background:#000;color:#fff;padding:8px 10px;border-radius:8px}

    /* Hero */
    .hero{position:relative;min-height:60svh;display:flex;align-items:center;justify-content:center;text-align:center;color:#fff;overflow:hidden;background:radial-gradient(140% 150% at 10% -20%, rgba(255,255,255,.15), transparent 60%),radial-gradient(120% 120% at 120% 10%, rgba(255,255,255,.10), transparent 60%),linear-gradient(180deg,#0033cc 0%,#0066ff 100%)}
    .hero canvas{position:absolute;inset:0;width:100%;height:100%;z-index:0}
    .hero .content{position:relative;z-index:2;max-width:900px;padding:0 20px;animation:fadeInUp 1s both}
    .hero h1{font-size:clamp(52px,7vw,72px);font-weight:800;line-height:1.05;letter-spacing:-.02em}

    /* Sections / titres */
    .section{max-width:1200px;margin:0 auto;padding:100px 20px}
    .section.alt{background:var(--aw-bg)}
    .title{margin:0 0 10px;text-align:center;font-size:clamp(36px,5vw,48px);font-weight:800;background:linear-gradient(135deg,#0F5F9A 0%,#0d5285 100%);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 2px 4px rgba(0,0,0,.08);transition:transform .35s ease,opacity .35s ease}
    .section.in-view .title{transform:translateY(-2px);opacity:1}
    .subtitle-center{font-size:1.2rem;color:var(--aw-muted);max-width:840px;margin:0 auto 56px;text-align:center}

    /* Grids & cards */
    .grid{display:grid;gap:24px;margin-top:18px}
    .cols-2{grid-template-columns:repeat(2,1fr)}
    .cols-3{grid-template-columns:repeat(3,1fr)}
    @media(max-width:980px){.cols-2,.cols-3{grid-template-columns:1fr}}
    .card{background:var(--aw-panel);border:1px solid rgba(15,95,154,.12);border-radius:var(--aw-radius);box-shadow:var(--shadow);padding:24px;transition:all var(--transition);display:block;color:inherit;position:relative}
    .card:hover{transform:translateY(-4px);box-shadow:0 28px 56px rgba(15,95,154,.15);border-color:var(--aw-copper)}
    .card .new-pill{position:absolute;top:12px;right:12px;background:var(--aw-copper);color:#fff;font-size:11px;font-weight:800;padding:4px 8px;border-radius:999px}
    .pill{display:inline-flex;align-items:center;justify-content:center;padding:6px 12px;margin:0 0 10px;border-radius:999px;background:var(--aw-blue);color:#fff;font:800 12px/1 "Inter"}
    .muted{color:var(--aw-muted)}
    .small{font-size:13px;color:var(--aw-muted)}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:10px 14px;border-radius:12px;font-weight:800;color:#fff;background:var(--aw-blue);border:none;cursor:pointer;transition:all var(--transition);box-shadow:var(--shadow)}
    .btn:hover{background:var(--aw-copper);transform:translateY(-2px)}
    .btn.ghost{background:var(--aw-panel);color:var(--aw-blue);border:1px solid rgba(15,95,154,.12)}
    .btn-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

    /* Sommaire + filtre */
    .with-aside{display:grid;grid-template-columns:260px 1fr;gap:24px}
    @media(max-width:1100px){.with-aside{grid-template-columns:1fr}}
    .toc{position:sticky;top:90px;align-self:start;background:var(--aw-panel);border:1px solid rgba(15,23,32,.08);border-radius:16px;padding:14px;box-shadow:var(--shadow)}
    .toc h4{margin:0 0 8px;font-size:13px;letter-spacing:.04em;text-transform:uppercase;color:var(--aw-muted)}
    .toc a{display:block;padding:8px 10px;border-radius:10px;color:inherit}
    .toc a.active{background:rgba(0,102,255,.08);color:var(--aw-blue);font-weight:700}
    .filterbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:12px 0 0}
    .filterbar input[type="search"]{flex:1;min-width:220px;padding:10px 12px;border-radius:12px;border:1px solid rgba(15,23,32,.12)}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:6px 10px;border-radius:999px;border:1px solid rgba(15,23,32,.12);cursor:pointer}
    .chip[aria-pressed="true"]{background:rgba(0,102,255,.08);border-color:var(--aw-blue);color:var(--aw-blue);font-weight:700}

    /* √âditeur intelligent */
    .editor-wrap{position:sticky;top:0;z-index:5;background:linear-gradient(180deg, rgba(245,247,255,.96), rgba(245,247,255,.92) 60%, transparent);backdrop-filter:saturate(1.2) blur(6px);padding:18px 14px;border:1px solid rgba(15,23,32,.06);border-radius:16px;margin-bottom:24px}
    .tabs{display:flex;gap:10px;justify-content:center;margin-bottom:12px}
    .tabs .btn{padding:10px 16px}
    form.smart{display:grid;gap:12px}
    form.smart .grid{gap:12px}
    form.smart label{font-size:12px;color:var(--aw-muted)}
    form.smart input,form.smart select,form.smart textarea{width:100%;padding:10px 12px;border:1px solid rgba(15,23,32,.1);border-radius:12px;background:var(--aw-panel);font:500 14px/1.4 "Inter";color:var(--aw-ink)}
    .fieldset{border:1px dashed rgba(15,23,32,.15);border-radius:14px;padding:12px}
    .fieldset legend{font-weight:800;font-size:12px;color:var(--aw-muted);padding:0 6px}
    .req::after{content:' *';color:var(--aw-copper)}
    .hint{font-size:12px;color:var(--aw-muted)}
    .model{display:flex;flex-direction:column;gap:10px}
    .model textarea{width:100%;min-height:320px;resize:vertical;padding:14px;border:1px solid rgba(15,95,154,.12);border-radius:12px;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;font-size:14px;line-height:1.55;background:var(--aw-bg);color:var(--aw-ink)}
    .conformity-bar{height:6px;background:rgba(15,95,154,.12);border-radius:3px;margin:8px 0;overflow:hidden}
    .conformity-bar span{display:block;height:100%;background:var(--aw-blue);transition:width .3s}

    /* Dark-mode switch */
    .theme-switch{position:fixed;top:14px;right:14px;z-index:60;background:var(--aw-panel);border:1px solid rgba(15,23,32,.12);border-radius:999px;padding:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow)}
    .theme-switch svg{width:18px;height:18px;fill:var(--aw-ink)}

    /* Back to top */
    .to-top{position:fixed; right:16px; bottom:16px; z-index:50; opacity:0; visibility:hidden; transform:translateY(12px); transition:all .3s ease}
    .to-top.show{opacity:1; visibility:visible; transform:none}

    /* Animations */
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:none}}
    .reveal{opacity:0;transform:translateY(30px);transition:opacity .8s cubic-bezier(.22,1,.36,1),transform .8s cubic-bezier(.22,1,.36,1)}
    .reveal.is-visible{opacity:1;transform:none}

    /* Focus visible */
    a:focus-visible,button:focus-visible{outline:2px solid var(--aw-blue)}
    ::selection{background:var(--aw-copper);color:#fff}

    /* Mini-faq */
    .mini-faq details{border:1px solid rgba(15,95,154,.12);border-radius:12px;padding:12px;margin-top:18px}
    .mini-faq summary{cursor:pointer;font-weight:700}
    .mini-faq[open] summary{margin-bottom:8px}

    /* Modal aper√ßu */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;place-items:center;z-index:100}
    .modal.show{display:grid}
    .modal>div{background:var(--aw-panel);border-radius:var(--aw-radius);padding:24px;max-width:700px;max-height:80vh;overflow:auto;box-shadow:var(--shadow)}
    .modal pre{white-space:pre-wrap;font-size:13px}
  </style>
</head>
<body class="page-modeles">
  <a class="skip-link" href="#main">Aller au contenu</a>

  <!-- Dark-mode switch -->
  <button class="theme-switch" aria-label="Basculer th√®me sombre" id="themeSwitch">
    <svg aria-hidden="true" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zM12 4v2m0 12v2m8-8h-2M6 12H4m11.3-5.3l-1.4 1.4m-6 6l-1.4 1.4m6.1 0l1.4 1.4m-6-6l1.4-1.4"/></svg>
  </button>

  <div id="header"></div>

  <!-- HERO -->
  <section class="hero">
    <canvas id="canvas" aria-hidden="true"></canvas>
    <div class="content">
      <h1 id="top">Mod√®les juridiques</h1>
    </div>
  </section>

  <main id="main">
    <!-- Acc√®s rapide + filtre -->
    <section class="section">
      <div class="container">
        <h2 class="title">√âditer mon formulaire</h2>
        <p class="subtitle-center">Cliquez sur un mod√®le, affinez votre s√©lection avec les filtres, puis remplissez le formulaire : les <b>[[‚Ä¶]]</b> deviennent instantan√©ment vos mentions l√©gales.</p>

        <div class="filterbar" role="search">
          <input id="filterInput" type="search" placeholder="Filtrer (ex. RGPD, cookies, mentions, CGV)" aria-label="Filtrer les cartes"/>
          <div class="chips" aria-label="Raccourcis de filtre">
            <button class="chip" data-chip="rgpd" aria-pressed="false" type="button">RGPD</button>
            <button class="chip" data-chip="cookies" aria-pressed="false" type="button">Cookies</button>
            <button class="chip" data-chip="mentions" aria-pressed="false" type="button">Mentions</button>
            <button class="chip" data-chip="formulaire" aria-pressed="false" type="button">Formulaires</button>
            <button class="chip" data-chip="emailing" aria-pressed="false" type="button">Emailing</button>
            <button class="chip" data-chip="cgv" aria-pressed="false" type="button">CGV</button>
          </div>
          <span id="filterCount" class="small" aria-live="polite" style="margin-left:auto"></span>
        </div>

        <div class="grid cols-3" style="margin-top:14px">
          <a class="card reveal filter-item" data-tags="rgpd confidentialit√© politique" data-updated="2025-05-01" href="#polconf" target="_self"><span class="pill">RGPD</span><span class="new-pill">Nouveau</span><h3>Politique de confidentialit√©</h3><p class="muted">Site vitrine / lead gen</p></a>
          <a class="card reveal filter-item" data-tags="cookies cmp consentement politique" data-updated="2025-04-20" href="#polcookies" target="_self"><span class="pill">Cookies</span><h3>Politique cookies & CMP</h3><p class="muted">Transparence & preuve</p></a>
          <a class="card reveal filter-item" data-tags="mentions l√©gales √©diteur h√©bergeur" data-updated="2025-04-15" href="#mentions" target="_self"><span class="pill">Mentions</span><h3>Mentions l√©gales</h3><p class="muted">√âditeur, h√©bergeur, RCS‚Ä¶</p></a>
          <a class="card reveal filter-item" data-tags="formulaire clause collecte" data-updated="2025-04-10" href="#form" target="_self"><span class="pill">Formulaires</span><h3>Clauses au point de collecte</h3><p class="muted">Contact, devis, newsletter</p></a>
          <a class="card reveal filter-item" data-tags="emailing d√©sinscription" data-updated="2025-04-05" href="#email" target="_self"><span class="pill">Emailing</span><h3>Pied de page d√©sinscription</h3><p class="muted">Lien & mentions</p></a>
          <a class="card reveal filter-item" data-tags="cgv b2c ecommerce" data-updated="2025-03-25" href="#cgv" target="_self"><span class="pill">E-commerce</span><h3>Trame courte CGV</h3><p class="muted">B2C simplifi√©</p></a>
        </div>
      </div>
    </section>

    <!-- √âditeur intelligent avec sommaire √† gauche -->
    <section class="section alt">
      <div class="container with-aside">
        <aside class="toc">
          <h4>Sommaire</h4>
          <nav aria-label="Sommaire de la page">
            <a href="#editor" data-spy>√âditeur</a>
            <a href="#polconf" data-spy>Politique de confidentialit√©</a>
            <a href="#polcookies" data-spy>Politique cookies</a>
            <a href="#mentions" data-spy>Mentions l√©gales</a>
            <a href="#form" data-spy>Clauses formulaires</a>
            <a href="#email" data-spy>Emailing</a>
            <a href="#cgv" data-spy>CGV (B2C)</a>
          </nav>
          <div class="small" style="margin-top:10px">Derni√®re mise √† jour : <time id="lastUpdated">‚Äî</time></div>
          <button class="btn ghost" id="resumeBtn" style="margin-top:12px;width:100%;display:none">Reprendre ma derni√®re session</button>
        </aside>

        <div>
          <!-- Bloc √©diteur -->
          <section class="reveal" id="editor" tabindex="-1" style="padding-top:0">
            <div class="editor-wrap is-visible">
              <div class="tabs" role="tablist" aria-label="Modes d‚Äô√©dition">
                <button id="tab-fast" class="btn" role="tab" aria-selected="true">√âditeur rapide (30 s)</button>
                <button id="tab-adv" class="btn ghost" role="tab" aria-selected="false">√âditeur avanc√© (60 s)</button>
              </div>

              <!-- RAPIDE -->
              <form id="fastForm" class="smart" autocomplete="on">
                <fieldset class="fieldset"><legend>Champs obligatoires (8)</legend>
                  <div class="grid cols-3">
                    <div><label for="raison" class="req">Raison sociale</label><input id="raison" name="raison" required placeholder="Ex : Awenoria SAS"></div>
                    <div><label for="forme" class="req">Forme juridique</label>
                      <select id="forme" name="forme" required>
                        <option value="">‚Äî</option><option>SAS</option><option>SARL</option><option>EI</option><option>EURL</option><option>SA</option>
                      </select>
                    </div>
                    <div><label for="capital" class="req">Capital social (‚Ç¨)</label><input id="capital" name="capital" required placeholder="10000"></div>
                  </div>
                  <div class="grid cols-3">
                    <div><label for="adresse" class="req">Adresse</label><input id="adresse" name="adresse" required placeholder="12 rue Exemple, 75000 Paris"></div>
                    <div><label for="emailRGPD" class="req">Email RGPD</label><input id="emailRGPD" name="emailRGPD" type="email" required placeholder="privacy@exemple.fr"></div>
                    <div><label for="siren" class="req">SIREN</label><input id="siren" name="siren" required placeholder="123 456 789"></div>
                  </div>
                  <div class="grid cols-3">
                    <div><label for="hebergeur" class="req">H√©bergeur</label><input id="hebergeur" name="hebergeur" required placeholder="Ex : OVHcloud"></div>
                    <div>
                      <label for="analytics" class="req">Analytics</label>
                      <select id="analytics" name="analytics" required>
                        <option value="aucun">Aucun</option><option>Google Analytics</option><option>Matomo</option><option>Plausible</option>
                      </select>
                    </div>
                    <div><label for="siteURL">URL du site</label><input id="siteURL" name="siteURL" placeholder="https://exemple.fr"></div>
                    <div><label for="dateMaj">Date (auto)</label><input id="dateMaj" name="dateMaj" readonly></div>
                  </div>
                </fieldset>
              </form>

              <!-- AVANC√â -->
              <form id="advForm" class="smart" hidden autocomplete="on">
                <fieldset class="fieldset"><legend>Champs optionnels (12)</legend>
                  <div class="grid cols-3">
                    <div><label for="siret">SIRET</label><input id="siret" name="siret" placeholder="123 456 789 00012"></div>
                    <div><label for="ape">Code APE</label><input id="ape" name="ape" placeholder="6201Z"></div>
                    <div><label for="tva">TVA intracom.</label><input id="tva" name="tva" placeholder="FRxx 123456789"></div>
                  </div>
                  <div class="grid cols-3">
                    <div><label for="dpoNom">DPO / Prestataire DPO</label><input id="dpoNom" name="dpoNom" placeholder="Nom ou soci√©t√©"></div>
                    <div><label for="dpoEmail">Email DPO</label><input id="dpoEmail" name="dpoEmail" type="email" placeholder="dpo@exemple.fr"></div>
                    <div><label for="mediateur">M√©diateur conso (B2C)</label><input id="mediateur" name="mediateur" placeholder="Nom / coordonn√©es / URL"></div>
                  </div>
                  <div class="grid cols-3">
                    <div><label for="paysHebergeur">Pays h√©bergeur</label><input id="paysHebergeur" name="paysHebergeur" placeholder="France / UE / hors UE"></div>
                    <div><label for="cms">CMS</label><input id="cms" name="cms" placeholder="WordPress, Webflow‚Ä¶"></div>
                    <div><label for="delaiRetractation">D√©lai r√©tractation (jours)</label><input id="delaiRetractation" name="delaiRetractation" placeholder="14"></div>
                  </div>
                  <div class="grid cols-3">
                    <div><label for="clauseTransfert">Transferts hors UE</label><input id="clauseTransfert" name="clauseTransfert" placeholder="CCT + mesures sup."></div>
                    <div><label for="sousTraitants">Sous-traitants</label><input id="sousTraitants" name="sousTraitants" placeholder="Emailing, CRM, CMP‚Ä¶"></div>
                    <div><label for="finalitesMarketing">Finalit√©s marketing</label><input id="finalitesMarketing" name="finalitesMarketing" placeholder="Prospection, retargeting‚Ä¶"></div>
                  </div>
                  <div class="grid cols-3">
                    <div><label for="rcsVille">RCS (Ville)</label><input id="rcsVille" name="rcsVille" placeholder="Paris"></div>
                    <div><label for="telephone">T√©l√©phone</label><input id="telephone" name="telephone" placeholder="01 23 45 67 89"></div>
                  </div>
                </fieldset>
              </form>

              <!-- Checklist conformit√© -->
              <div class="small" style="margin-top:12px">
                <label><input type="checkbox" id="ckFinalites"> J‚Äôai v√©rifi√© que mes finalit√©s sont bien list√©es</label><br>
                <label><input type="checkbox" id="ckDurees"> J‚Äôai compl√©t√© les dur√©es de conservation</label><br>
                <label><input type="checkbox" id="ckSousTraitants"> J‚Äôai indiqu√© mes sous-traitants</label>
              </div>
              <div class="conformity-bar"><span id="conformityFill"></span></div>
              <div class="small" id="conformityText">0 % conforme</div>

              <div class="btn-row" style="justify-content:flex-end;margin-top:12px">
                <button class="btn ghost" id="btnPreview">Aper√ßu global</button>
                <button class="btn" id="btnPack">T√©l√©charger le pack (.zip)</button>
              </div>
            </div>
          </section>

          <!-- Mod√®les -->
          <section id="polconf" class="section alt reveal" tabindex="-1" style="padding-top:0">
            <h2 class="title">Politique de confidentialit√© ‚Äî mod√®le ‚Äúsite vitrine‚Äù</h2>
            <div class="card model">
              <div class="small">üí° <b>√Ä adapter</b> : finalit√©s r√©elles (contact, prospection, analytics, recrutement), sous-traitants (h√©bergeur, emailing, CRM), transferts.</div>
<textarea id="mdl-polconf" spellcheck="false">Derni√®re mise √† jour : [[JJ/MM/AAAA]]

1) Responsable de traitement
[[Raison sociale]], [[forme juridique]], [[adresse]], [[RCS/SIREN]], [[TVA]].
Contact : [[email RGPD]] | [[adresse]].
D√©l√©gu√© √† la Protection des Donn√©es (le cas √©ch√©ant) : [[nom DPO / prestataire DPO]] ‚Äì [[email DPO]].

2) Finalit√©s & bases l√©gales
‚Ä¢ Prise de contact / demandes (base l√©gale : mesures pr√©contractuelles).
‚Ä¢ Prospection par email (base l√©gale : consentement ou int√©r√™t l√©gitime).
‚Ä¢ Analytics / mesure d‚Äôaudience (base : consentement si non strictement n√©cessaire) [[outil analytics]].
‚Ä¢ Recrutement (base : int√©r√™t l√©gitime et/ou mesures pr√©contractuelles).
‚Ä¢ Gestion des cookies et consentements (base : obligation l√©gale / consentement).

3) Donn√©es & dur√©es de conservation
‚Ä¢ Contact : identit√©, coordonn√©es, message ‚Äî conservation : [[dur√©e]], puis archivage l√©gal si applicable.
‚Ä¢ Prospection : email, pr√©f√©rences ‚Äî [[dur√©e]] apr√®s dernier contact ou jusqu‚Äôau retrait du consentement.
‚Ä¢ Analytics : identifiants de cookies, logs ‚Äî [[dur√©e]].
‚Ä¢ Candidatures : CV, LM, √©changes ‚Äî [[dur√©e]] apr√®s dernier contact.

4) Destinataires & sous-traitants
Donn√©es accessibles en interne. Sous-traitants : [[h√©bergeur]], [[outil emailing/CMP/CRM]], situ√©s [[UE/hors UE avec garanties]].

5) Transferts hors UE
CCT et mesures compl√©mentaires le cas √©ch√©ant. Infos : [[lien ou contact]].

6) Droits des personnes
Acc√®s, rectification, effacement, limitation, opposition, portabilit√©. Retrait du consentement. Exercer vos droits : [[email RGPD / formulaire]]. R√©clamation : CNIL (cnil.fr).

7) S√©curit√©
Mesures techniques et organisationnelles proportionn√©es.

8) Cookies
Voir notre politique : [[/politique-cookies]]. Param√©trage via le bandeau / centre de pr√©f√©rences.

9) Contact
[[email RGPD]] ‚Äî [[adresse]].
</textarea>
              <div class="btn-row"><button class="btn" data-copy="#mdl-polconf">Copier le mod√®le</button><button class="btn ghost" data-link="#polconf">Lien direct</button></div>
            </div>
          </section>

          <section id="polcookies" class="section reveal" tabindex="-1">
            <h2 class="title">Politique cookies & CMP ‚Äî mod√®le</h2>
            <div class="card model">
              <div class="small">üí° <b>√Ä adapter</b> : liste des cookies (finalit√©, dur√©e, tiers), preuve du consentement (journal CMP), lien ‚Äúg√©rer mes cookies‚Äù.</div>
<textarea id="mdl-cookies" spellcheck="false">Derni√®re mise √† jour : [[JJ/MM/AAAA]]

1) Qu‚Äôest-ce qu‚Äôun cookie ?
Fichier d√©pos√© sur votre terminal pour le fonctionnement du site, mesurer l‚Äôaudience ou personnaliser.

2) Notre cadre
Nous ne d√©posons des cookies non essentiels qu‚Äôavec votre consentement. Le refus est aussi simple que l‚Äôacceptation. Vous pouvez modifier vos choix √† tout moment via [[lien ‚ÄúG√©rer mes cookies‚Äù]].

3) Types de cookies utilis√©s
‚Ä¢ Strictement n√©cessaires ‚Äî ex : √©quilibrage, s√©curit√©, conservation du choix. Dur√©e : [[dur√©e]].
‚Ä¢ Mesure d‚Äôaudience (non exempt√©e) ‚Äî consentement requis (ex : [[outil analytics]]). Dur√©e : [[dur√©e]].
‚Ä¢ Marketing / publicit√© ‚Äî consentement. Dur√©e : [[dur√©e]].

4) D√©tail des cookies
| Nom | Finalit√© | Tiers | Dur√©e |
| ---- | -------- | ----- | ----- |
| [[ex: _ga]] | Analytics | Google | 13 mois |
| [[...]] | [[...]] | [[...]] | [[...]] |

5) Preuve du consentement
Notre CMP [[nom de la CMP]] journalise votre choix (horodatage, version). Contact : [[email RGPD]].

6) Modifier vos choix
√Ä tout moment via [[lien ouvrir CMP]].

7) Contact / recours
Exercer vos droits : [[email RGPD]]. R√©clamation : CNIL (cnil.fr).
</textarea>
              <div class="btn-row"><button class="btn" data-copy="#mdl-cookies">Copier le mod√®le</button><button class="btn ghost" data-link="#polcookies">Lien direct</button></div>
            </div>
          </section>

          <section id="mentions" class="section alt reveal" tabindex="-1">
            <h2 class="title">Mentions l√©gales ‚Äî mod√®le</h2>
            <div class="card model">
              <div class="small">üí° <b>√Ä adapter</b> : identifiants (RCS/SIREN/TVA), m√©diation (B2C), propri√©t√© intellectuelle (marques/visuels).</div>
<textarea id="mdl-mentions" spellcheck="false">√âditeur
[[Raison sociale]] [[forme juridique]] au capital de [[montant]] ‚Ç¨, [[adresse compl√®te]].
RCS [[ville]] [[num√©ro RCS]] ‚Äî SIREN [[num√©ro]] ‚Äî TVA [[n¬∞ intracom]].
Contact : [[email]] / [[t√©l√©phone]].

Directeur de la publication
[[Nom, fonction]].

H√©bergeur
[[Nom h√©bergeur]], [[adresse]], [[t√©l√©phone ou email]].

Propri√©t√© intellectuelle
Le site et son contenu (textes, images, marques) sont prot√©g√©s. Toute reproduction est soumise √† autorisation.

Donn√©es personnelles
Voir : [[/confidentialite.html]].

M√©diation √† la consommation (si B2C)
Apr√®s d√©marche pr√©alable aupr√®s de [[Soci√©t√©]], m√©diateur : [[Nom / coordonn√©es / site]].

Cr√©dits
Design & d√©veloppement : [[cr√©dits le cas √©ch√©ant]]. Photos/illustrations : [[banque d‚Äôimages / cr√©dits]].
</textarea>
              <div class="btn-row"><button class="btn" data-copy="#mdl-mentions">Copier le mod√®le</button><button class="btn ghost" data-link="#mentions">Lien direct</button></div>
            </div>
          </section>

          <section id="form" class="section reveal" tabindex="-1">
            <h2 class="title">Clauses au point de collecte ‚Äî mod√®les</h2>
            <div class="grid cols-2">
              <div class="card model"><span class="pill">Contact / Devis</span>
<textarea id="mdl-form-contact" spellcheck="false">Le responsable de traitement est [[Raison sociale]]. Vos donn√©es servent √† traiter votre demande et √† vous r√©pondre (base : mesures pr√©contractuelles). En savoir plus : [[lien Politique de confidentialit√©]]. Contact RGPD : [[email RGPD]].
</textarea>
                <div class="btn-row"><button class="btn" data-copy="#mdl-form-contact">Copier</button></div>
              </div>
              <div class="card model"><span class="pill">Newsletter (consentement)</span>
<textarea id="mdl-form-news" spellcheck="false">En cochant cette case, j‚Äôaccepte de recevoir les actualit√©s de [[Raison sociale]]. Vous pouvez retirer votre consentement via le lien de d√©sinscription. Informations : [[lien Politique de confidentialit√©]].
</textarea>
                <div class="btn-row"><button class="btn" data-copy="#mdl-form-news">Copier</button></div>
              </div>
            </div>
            <div class="card model" style="margin-top:18px"><span class="pill">Recrutement</span>
<textarea id="mdl-form-jobs" spellcheck="false">Le responsable de traitement est [[Raison sociale]]. Vos donn√©es sont trait√©es pour l‚Äô√©tude de votre candidature (base : int√©r√™t l√©gitime/mesures pr√©contractuelles). Conservation : [[dur√©e]] apr√®s dernier contact. Exercer vos droits : [[email RGPD]] / [[lien Politique]].
</textarea>
              <div class="btn-row"><button class="btn" data-copy="#mdl-form-jobs">Copier</button></div>
            </div>
          </section>

          <section id="email" class="section alt reveal" tabindex="-1">
            <h2 class="title">Emailing ‚Äî pied de page d√©sinscription</h2>
            <div class="card model">
              <div class="small">‚ÑπÔ∏è Le lien de d√©sinscription doit fonctionner sans friction (un clic). Conservez la preuve d‚Äôopt-in et la date d‚Äôinscription.</div>
<textarea id="mdl-email" spellcheck="false">Vous recevez cet email de la part de [[Raison sociale]] car vous avez consenti √† recevoir nos communications. Pour ne plus recevoir nos emails : [[Lien de d√©sinscription]]. Politique de confidentialit√© : [[URL]]. Contact RGPD : [[email RGPD]].
</textarea>
              <div class="btn-row"><button class="btn" data-copy="#mdl-email">Copier le mod√®le</button><button class="btn ghost" data-link="#email">Lien direct</button></div>
            </div>
          </section>

          <section id="cgv" class="section reveal" tabindex="-1">
            <h2 class="title">Trame courte CGV (B2C) ‚Äî mod√®le</h2>
            <div class="card model">
              <div class="small">‚ö†Ô∏è Trame synth√©tique (information pr√©contractuelle). Compl√©tez selon vos produits/services (livraison, garanties, m√©diation, droit applicable‚Ä¶).</div>
<textarea id="mdl-cgv" spellcheck="false">1) Identit√© du vendeur
[[Raison sociale]], [[forme juridique]], [[adresse]], [[RCS/SIREN]], [[TVA]], contact : [[email/t√©l]].

2) Produits & prix
Descriptions sur le site. Prix en [[TTC/HT]] [[devise]] ‚Äî n‚Äôincluent pas [[frais de livraison le cas √©ch√©ant]].

3) Commande & paiement
Moyens accept√©s : [[liste]]. Commande ferme apr√®s confirmation du paiement. Facture envoy√©e par email.

4) Livraison / ex√©cution
D√©lais indicatifs : [[X jours ouvr√©s]] ; zones : [[liste]]. Suivi transmis par email.

5) Droit de r√©tractation (B2C)
[[14]] jours √† compter de la r√©ception. Modalit√©s & formulaire : [[lien / joindre formulaire]]. Exceptions l√©gales : [[contenu num√©rique d√©marr√©, produits personnalis√©s, etc.]].

6) Garanties l√©gales
Conformit√© & vices cach√©s (Code de la conso / Code civil). SAV : [[email/t√©l]].

7) M√©diation √† la consommation
Apr√®s d√©marche pr√©alable aupr√®s de [[Raison sociale]], m√©diateur : [[Nom / coordonn√©es / URL]].

8) Donn√©es personnelles
Voir Politique de confidentialit√© : [[URL]]. Finalit√©s : gestion de commande, livraison, facturation.

9) Droit applicable & litiges
Droit fran√ßais. Tribunaux comp√©tents selon le droit commun.
</textarea>
              <div class="btn-row"><button class="btn" data-copy="#mdl-cgv">Copier le mod√®le</button><button class="btn ghost" data-link="#cgv">Lien direct</button></div>
            </div>
          </section>

          <!-- Mini-faq -->
          <section class="section alt mini-faq reveal">
            <h3>Mini-FAQ</h3>
            <details>
              <summary>Dois-je nommer un DPO ?</summary>
              <p>Oui si vous traitez des donn√©es sensibles ou surveillez r√©guli√®rement des personnes. Sinon, vous pouvez externaliser.</p>
            </details>
            <details>
              <summary>Puis-je mutualiser mentions l√©gales & CGV ?</summary>
              <p>Non, ils ont des finalit√©s diff√©rentes. Gardez des pages s√©par√©es pour plus de clart√©.</p>
            </details>
            <details>
              <summary>Quand dois-je mettre √† jour la date ?</summary>
              <p>D√®s que vous changez de finalit√©, outil ou dur√©e de conservation. La date est auto-g√©n√©r√©e ici.</p>
            </details>
          </section>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="section alt">
      <div class="container" style="text-align:center">
        <h2 class="title">Besoin d‚Äôune relecture experte ?</h2>
        <p class="subtitle-center">On adapte ces mod√®les √† votre secteur et √† vos outils (CMP, CRM, emailing) et on pr√©pare les preuves utiles.</p>
        <div class="btn-row" style="justify-content:center"><a class="btn" href="contact.html">Parler √† un expert</a><a class="btn ghost" href="tarifs.html">Voir les offres</a></div>
      </div>
    </section>
  </main>

  <!-- Modal aper√ßu -->
  <div class="modal" id="previewModal">
    <div>
      <h3>Aper√ßu global</h3>
      <pre id="previewContent"></pre>
      <div class="btn-row"><button class="btn" id="closePreview">Fermer</button></div>
    </div>
  </div>

  <!-- Bouton ‚Üë Haut -->
  <a class="btn to-top" id="toTop" href="#top" target="_self" aria-label="Revenir en haut">‚Üë Haut</a>

  <!-- JS libs pack zip -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- JS: canvas + reveal + in-view + scrollspy + copier + √©diteur + filtre + date + zip + toTop + theme + conformit√© + historique + partage + aper√ßu -->
  <script>
    /* Canvas particles */
    const canvas = document.getElementById('canvas'); const ctx = canvas.getContext('2d');
    let w = canvas.width = innerWidth, h = canvas.height = innerHeight; const parts = []; const opts = {count:60,speed:.3,radius:2,distance:120,color:'rgba(255,255,255,.25)'};
    addEventListener('resize', () => { w = canvas.width = innerWidth; h = canvas.height = innerHeight; });
    class P{ constructor(){ this.x=Math.random()*w; this.y=Math.random()*h; this.vx=(Math.random()-.5)*opts.speed; this.vy=(Math.random()-.5)*opts.speed } update(){ this.x+=this.vx; this.y+=this.vy; if(this.x<0||this.x>w) this.vx*=-1; if(this.y<0||this.y>h) this.vy*=-1 } draw(){ ctx.beginPath(); ctx.arc(this.x,this.y,opts.radius,0,Math.PI*2); ctx.fillStyle=opts.color; ctx.fill() } lines(){ parts.forEach(p=>{ const d=Math.hypot(this.x-p.x,this.y-p.y); if(d<opts.distance){ ctx.beginPath(); ctx.moveTo(this.x,this.y); ctx.lineTo(p.x,p.y); ctx.strokeStyle=`rgba(255,255,255,${1-d/opts.distance})`; ctx.stroke() } }) } }
    function init(){ for(let i=0;i<opts.count;i++) parts.push(new P()) } function anim(){ ctx.clearRect(0,0,w,h); parts.forEach(p=>{ p.update(); p.draw(); p.lines() }); requestAnimationFrame(anim) } init(); anim();

    /* Reveal / in-view */
    const reveals = document.querySelectorAll('.reveal'); const io = new IntersectionObserver(es => es.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('is-visible') }), {threshold:.2}); reveals.forEach(el=>io.observe(el));
    const sections = document.querySelectorAll('.section'); const ioView = new IntersectionObserver(es => es.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('in-view') }), {threshold:.35}); sections.forEach(s=>ioView.observe(s));

    /* Scrollspy */
    const spyLinks = Array.from(document.querySelectorAll('[data-spy]'));
    const targets = spyLinks.map(a=>document.querySelector(a.getAttribute('href'))).filter(Boolean);
    const spy = new IntersectionObserver(entries=>{ entries.forEach(e=>{ const id='#'+e.target.id; const link=spyLinks.find(a=>a.getAttribute('href')===id); if(!link) return; if(e.isIntersecting){ spyLinks.forEach(a=>a.classList.remove('active')); link.classList.add('active') } }) }, {rootMargin:'-40% 0px -55% 0px', threshold:.01});
    targets.forEach(t=>spy.observe(t));

    /* Copier textarea + lien direct */
    document.addEventListener('click', async e=>{
      const btn=e.target.closest('button[data-copy]'); if(btn){ const sel=btn.getAttribute('data-copy'); const ta=document.querySelector(sel); if(!ta) return; try{ await navigator.clipboard.writeText(ta.value); const old=btn.textContent; btn.textContent='Copi√© ‚úì'; setTimeout(()=>btn.textContent=old,1500) }catch{ ta.select(); document.execCommand('copy'); const old=btn.textContent; btn.textContent='Copi√© ‚úì'; setTimeout(()=>btn.textContent=old,1500) } return}
      const linkBtn=e.target.closest('button[data-link]'); if(linkBtn){ const hash=linkBtn.getAttribute('data-link'); const url=new URL(location.href); url.hash=hash; await navigator.clipboard.writeText(url.href); const old=linkBtn.textContent; linkBtn.textContent='Lien copi√© ‚úì'; setTimeout(()=>linkBtn.textContent=old,1500)}
    });

    /* Tabs √©diteur */
    const fastForm=document.getElementById('fastForm'); const advForm=document.getElementById('advForm');
    const tabFast=document.getElementById('tab-fast'); const tabAdv=document.getElementById('tab-adv');
    const pad=n=>String(n).padStart(2,'0'); const d=new Date(); const today=`${pad(d.getDate())}/${pad(d.getMonth()+1)}/${d.getFullYear()}`; document.getElementById('dateMaj').value=today;
    function switchTab(which){ const fast=which==='fast'; fastForm.hidden=!fast; advForm.hidden=fast; tabFast.classList.toggle('ghost',!fast); tabFast.setAttribute('aria-selected',fast); tabAdv.classList.toggle('ghost',fast); tabAdv.setAttribute('aria-selected',!fast); document.getElementById('editor').scrollIntoView({behavior:'smooth',block:'start'}) }
    tabFast.addEventListener('click',()=>switchTab('fast')); tabAdv.addEventListener('click',()=>switchTab('adv'));

    /* Templates dynamiques */
    const modelAreas=[...document.querySelectorAll('.model textarea')]; modelAreas.forEach(ta=>ta.dataset.template=ta.value);
    function getFormData(){ const f1=Object.fromEntries(new FormData(fastForm).entries()); const f2=advForm.hidden?{}:Object.fromEntries(new FormData(advForm).entries()); const data={...f1,...f2}; data.raisonSociale=data.raison||''; data.formeJuridique=data.forme||''; data.capital=data.capital||''; data.adresse=data.adresse||''; data.emailRGPD=data.emailRGPD||''; data.siren=data.siren||''; data.hebergeur=data.hebergeur||''; data.analytics=(data.analytics && data.analytics!=='aucun')?data.analytics:''; data.JJMMYYYY=today; return data }
    function tokenMapFromData(data){ return {
      'JJ/MM/AAAA': data.JJMMYYYY,
      'Raison sociale': data.raisonSociale,
      'forme juridique': data.formeJuridique,
      'montant': data.capital,
      'adresse': data.adresse,
      'adresse compl√®te': data.adresse,
      'email RGPD': data.emailRGPD,
      'email/t√©l': data.emailRGPD || (data.telephone||''),
      'RCS/SIREN': data.siren,
      'num√©ro RCS': data.siren,
      'num√©ro': data.siren,
      'n¬∞ intracom': data.tva || '',
      'TVA': data.tva || '',
      'outil analytics': data.analytics || '‚Äî',
      'nom DPO / prestataire DPO': data.dpoNom || '‚Äî',
      'email DPO': data.dpoEmail || (data.emailRGPD||''),
      'h√©bergeur': data.hebergeur,
      'Nom h√©bergeur': data.hebergeur,
      'ville': data.rcsVille || '',
      't√©l√©phone': data.telephone || '',
      'URL': data.siteURL || '',
      'lien Politique de confidentialit√©': (data.siteURL ? new URL(data.siteURL).origin + '/confidentialite.html' : '/confidentialite.html'),
      '/politique-cookies': (data.siteURL ? new URL(data.siteURL).origin + '/politique-cookies' : '/politique-cookies'),
      'lien ‚ÄúG√©rer mes cookies‚Äù': '#preferences-cookies',
      'lien ouvrir CMP': '#preferences-cookies',
      'UE/hors UE avec garanties': data.paysHebergeur || 'UE',
      'outil emailing/CMP/CRM': data.sousTraitants || '‚Äî',
      'Nom / coordonn√©es / site du m√©diateur': data.mediateur || '‚Äî',
      'Soci√©t√©': data.raisonSociale || '‚Äî',
      'banque d‚Äôimages / cr√©dits': '‚Äî',
      'cr√©dits le cas √©ch√©ant': '‚Äî',
      'dur√©e': '13 mois',
      'lien / joindre formulaire': (data.siteURL ? new URL(data.siteURL).origin + '/retractation.pdf' : '/retractation.pdf'),
      'TTC/HT': 'TTC',
      'devise': 'EUR',
      'frais de livraison le cas √©ch√©ant': 'frais de livraison le cas √©ch√©ant',
      'liste': 'CB, Visa, Mastercard',
      'X jours ouvr√©s': '3 √† 5',
      'Nom, fonction': 'Directeur de la publication',
    } }
    function fillTemplate(tpl,map){ return tpl.replace(/\[\[([^\]]+)\]\]/g,(m,t)=>{ const k=t.trim(); return (map[k]!==undefined && map[k]!== '')? map[k] : m }) }
    function updateAllModels(){ const data=getFormData(); const map=tokenMapFromData(data); modelAreas.forEach(ta=>ta.value=fillTemplate(ta.dataset.template,map)); updateConformity()}
    fastForm.addEventListener('input',updateAllModels); advForm.addEventListener('input',updateAllModels); updateAllModels();

    /* Conformity bar */
    function updateConformity(){ const data=getFormData(); let ok=0; if(data.raison) ok++; if(data.forme) ok++; if(data.capital) ok++; if(data.adresse) ok++; if(data.emailRGPD) ok++; if(data.siren) ok++; if(data.hebergeur) ok++; if(data.analytics) ok++; const pct=Math.round(ok/8*100); document.getElementById('conformityFill').style.width=pct+'%'; document.getElementById('conformityText').textContent=pct+' % conforme'; document.getElementById('ckFinalites').checked&&ok++; document.getElementById('ckDurees').checked&&ok++; document.getElementById('ckSousTraitants').checked&&ok++; localStorage.setItem('awenoriaFields',JSON.stringify(getFormData())); localStorage.setItem('awenoriaDate',Date.now()) }
    ['ckFinalites','ckDurees','ckSousTraitants'].forEach(id=>document.getElementById(id).addEventListener('change',updateConformity));

    /* ZIP: pack fichiers + HTML */
    document.getElementById('btnPack').addEventListener('click', async ()=>{ const data={...getFormData()}; const map=tokenMapFromData(data);
      const files={
        'politique-confidentialite.txt': fillTemplate(document.getElementById('mdl-polconf').dataset.template,map),
        'politique-cookies.txt': fillTemplate(document.getElementById('mdl-cookies').dataset.template,map),
        'mentions-legales.txt': fillTemplate(document.getElementById('mdl-mentions').dataset.template,map),
        'clauses-contact.txt': fillTemplate(document.getElementById('mdl-form-contact').dataset.template,map),
        'clauses-newsletter.txt': fillTemplate(document.getElementById('mdl-form-news').dataset.template,map),
        'clauses-recrutement.txt': fillTemplate(document.getElementById('mdl-form-jobs').dataset.template,map),
        'cgv-b2c-trame.txt': fillTemplate(document.getElementById('mdl-cgv').dataset.template,map),
        'politique-confidentialite.html': `<!doctype html><html lang="fr"><head><meta charset="utf-8"><title>Politique de confidentialit√©</title><style>body{font-family:Inter,system-ui;margin:40px;max-width:800px}</style></head><body><h1>Politique de confidentialit√©</h1>`+ fillTemplate(document.getElementById('mdl-polconf').dataset.template,map).replace(/\n/g,'</p><p>') +`</body></html>`,
        'README.md': `# Pack mod√®les juridiques\n\nG√©n√©r√© avec l'√©diteur intelligent.\n\n## Fichiers\n- politique-confidentialite.txt\n- politique-cookies.txt\n- mentions-legales.txt\n- clauses-contact.txt\n- clauses-newsletter.txt\n- clauses-recrutement.txt\n- cgv-b2c-trame.txt\n- politique-confidentialite.html\n- tokens.csv\n\n## Notes\n- V√©rifiez les champs encore entre [[...]] et compl√©tez si besoin.\- Conservez les preuves (opt-in, journaux CMP).\n- Derni√®re maj: ${today}\n` };
      const entries=Object.entries(map).map(([k,v])=>`${JSON.stringify(k)};${JSON.stringify(v)}`).join('\n');
      const csv=`token;valeur\n${entries}`;
      const zip=new JSZip(); Object.entries(files).forEach(([n,c])=>zip.file(n,c)); zip.file('tokens.csv',csv);
      const blob=await zip.generateAsync({type:'blob'}); saveAs(blob,'awenoria-modeles-juridiques.zip');
      const btn=document.getElementById('btnPack'); const old=btn.textContent; btn.textContent='Pack t√©l√©charg√© ‚úì'; setTimeout(()=>btn.textContent=old,4000)
    });

    /* Filtre cartes + compteur anim√© */
    const filterInput=document.getElementById('filterInput'); const chips=document.querySelectorAll('.chip'); const items=document.querySelectorAll('.filter-item'); const counter=document.getElementById('filterCount'); let activeTags=new Set();
    function animateCount(from,to){ const duration=200; const start=Date.now(); const step=()=>{ const t=Math.min((Date.now()-start)/duration,1); const val=Math.round(from+(to-from)*t); counter.textContent=`${val} carte${val>1?'s':''} visible${val>1?'s':''}`; if(t<1) requestAnimationFrame(step) }; requestAnimationFrame(step) }
    function applyFilter(){ const q=(filterInput?.value||'').toLowerCase().trim(); let shown=0; items.forEach(el=>{ const hay=(el.textContent+' '+(el.getAttribute('data-tags')||'')).toLowerCase(); const tagMatch=activeTags.size?[...activeTags].every(t=>hay.includes(t)):true; const qMatch=q?hay.includes(q):true; const visible=tagMatch && qMatch; el.style.display=visible?'':'none'; if(visible) shown++ }); animateCount(parseInt(counter.dataset.last||0),shown); counter.dataset.last=shown }
    filterInput?.addEventListener('input',()=>{ clearTimeout(applyFilter._t); applyFilter._t=setTimeout(applyFilter,150) }); chips.forEach(ch=>ch.addEventListener('click',()=>{ const val=(ch.dataset.chip||'').toLowerCase(); const p=ch.getAttribute('aria-pressed')==='true'; ch.setAttribute('aria-pressed',String(!p)); if(!p) activeTags.add(val); else activeTags.delete(val); applyFilter() })); applyFilter();

    /* Partage URL */
    const params=new URLSearchParams(location.search); const modele=params.get('modele'); if(modele){ const targetChip=document.querySelector(`.chip[data-chip="${modele}"]`); if(targetChip){ targetChip.click(); document.querySelector(`a[href="#${modele}"]`)?.scrollIntoView({behavior:'smooth'}) } }

    /* Last updated + SEO */
    const last=new Date(document.lastModified); const fmt=last.toLocaleDateString('fr-FR',{year:'numeric',month:'long',day:'2-digit'}); const lastNode=document.getElementById('lastUpdated'); if(lastNode){ lastNode.textContent=fmt; lastNode.setAttribute('datetime',last.toISOString()) }
    const meta=document.createElement('meta'); meta.setAttribute('property','article:modified_time'); meta.setAttribute('content',last.toISOString()); document.head.appendChild(meta);
    const ld={ '@context':'https://schema.org', '@type':'WebPage', name:'Mod√®les juridiques ‚Äî Awenoria', url: location.href, dateModified: last.toISOString() };
    const ldScript=document.createElement('script'); ldScript.type='application/ld+json'; ldScript.textContent=JSON.stringify(ld); document.head.appendChild(ldScript);

    /* Back to top */
    const toTop = document.getElementById('toTop');
    const ioTop = new IntersectionObserver(([entry]) => {
      if(entry.isIntersecting){ toTop.classList.remove('show'); } else { toTop.classList.add('show'); }
    });
    ioTop.observe(document.querySelector('.hero'));

    /* Theme switch */
    const themeSwitch=document.getElementById('themeSwitch'); const body=document.body;
    function applyTheme(dark){ body.classList.toggle('theme-dark',dark); localStorage.setItem('theme',dark?'dark':'light') }
    themeSwitch.addEventListener('click',()=>{ const dark=!body.classList.contains('theme-dark'); applyTheme(dark) });
    const saved=localStorage.getItem('theme'); if(saved==='dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) applyTheme(true);

    /* Historique local */
    const resumeBtn=document.getElementById('resumeBtn'); const savedFields=localStorage.getItem('awenoriaFields'); if(savedFields){ resumeBtn.style.display='block'; resumeBtn.addEventListener('click',()=>{ const data=JSON.parse(savedFields); Object.entries(data).forEach(([k,v])=>{ const el=document.querySelector(`[name="${k}"]`); if(el) el.value=v }); updateAllModels(); resumeBtn.style.display='none' })}

    /* Aper√ßu global */
    const previewModal=document.getElementById('previewModal'); const previewContent=document.getElementById('previewContent'); const btnPreview=document.getElementById('btnPreview'); const closePreview=document.getElementById('closePreview');
    btnPreview.addEventListener('click',()=>{ const data=getFormData(); const map=tokenMapFromData(data); let out=''; modelAreas.forEach(ta=>{ out+=`--- ${ta.id.replace('mdl-','').toUpperCase()} ---\n`; out+=fillTemplate(ta.dataset.template,map)+'\n\n' }); previewContent.textContent=out; previewModal.classList.add('show') });
    closePreview.addEventListener('click',()=>previewModal.classList.remove('show'));
    previewModal.addEventListener('click',e=>{ if(e.target===previewModal) previewModal.classList.remove('show') });

    /* CTA flottant si filtre actif */
    const ctaFloat=document.createElement('a'); ctaFloat.className='btn'; ctaFloat.textContent='Remplir le formulaire'; ctaFloat.href='#editor'; ctaFloat.style.position='fixed'; ctaFloat.style.bottom='76px'; ctaFloat.style.right='16px'; ctaFloat.style.zIndex='49'; ctaFloat.style.display='none'; document.body.appendChild(ctaFloat);
    const ioCta=new IntersectionObserver(([e])=>{ if(e.isIntersecting){ ctaFloat.style.display='none' } else { ctaFloat.style.display='inline-flex' } }, {rootMargin:'-80px 0px 0px 0px'});
    ioCta.observe(document.getElementById('editor'));
  </script>

  <!-- Loader header/footer + nav -->
  <script>
  document.addEventListener('DOMContentLoaded',()=>{
    const headMount=document.getElementById('header'); const footMount=document.getElementById('footer'); if(!headMount && !footMount) return;
    const isGh=/github\.io$/.test(location.hostname); let base='/'; if(isGh){ const parts=location.pathname.split('/').filter(Boolean); base=parts.length?`/${parts[0]}/`:'/'; }
    const candidates=p=>{ const clean=p.replace(/^\//,''); return [ base+clean, './'+clean, '../'+clean ] };
    async function fetchAny(paths){ const queue=paths.flatMap(candidates); for(const u of queue){ try{ const r=await fetch(u,{cache:'no-cache'}); if(r.ok) return r.text() }catch(_){} } throw new Error('Aucun chemin valide parmi: '+paths.join(', ')) }
    function fixRootUrls(container){ container.querySelectorAll('a[href^="/"], img[src^="/"], link[href^="/"], script[src^="/"]').forEach(el=>{ const attr=el.hasAttribute('href')?'href':'src'; const val=el.getAttribute(attr); if(/^\/\//.test(val)) return; el.setAttribute(attr, base+val.replace(/^\//,'')) }) }
    if(headMount){ fetchAny(['header.html','partials/header.html']).then(html=>{ headMount.innerHTML=html; fixRootUrls(headMount); return fetchAny(['assets/nav.js','nav.js']) }).then(code=>{ const s=document.createElement('script'); if(/\b(import|export)\b/.test(code)) s.type='module'; s.textContent=code; document.body.appendChild(s) }).catch(err=>{ console.error('Header load error:',err); headMount.innerHTML='<!-- Header introuvable -->' }) }
    if(footMount){ fetchAny(['footer.html','partials/footer.html']).then(html=>{ footMount.innerHTML=html; fixRootUrls(footMount) }).catch(err=>{ console.error('Footer load error:',err); footMount.innerHTML='<!-- Footer introuvable -->' }) }
  });
  </script>
</body>
</html>
